(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{385:function(e,a,t){e.exports=t(685)},391:function(e,a,t){},395:function(e,a){},397:function(e,a){},433:function(e,a){},434:function(e,a){},494:function(e,a,t){},495:function(e,a,t){},571:function(e,a,t){},672:function(e,a,t){},674:function(e,a,t){},685:function(e,a,t){"use strict";t.r(a);t(386);var n=t(0),i=t.n(n),l=t(94),r=t.n(l),s=t(21),o=t(22),c=t(23),u=t(24),d=t(10),m=t(25),h=t(64),p=t(30),b=t(701),v=t(704),E=t(171),f=t(700),g=t(706),O=t(111),C=(t(391),t(343)),x=t(81),y=t(344),j=t.n(y),k=Object({NODE_ENV:"production",PUBLIC_URL:""}).PUBLIC_KEY||"-----BEGIN PUBLIC KEY-----\nMFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBALns1DW2lVs/Cjk9nVxBzG8Gn0QIF8wH\n1LotLwuOk+lgVXZiXzkbMXxDzj3rEP0aVY0ATtqWxWcjurJXwqViLF0CAwEAAQ==\n-----END PUBLIC KEY-----",N={algorithm:"RS256",issuer:"laudos"};function H(){var e=localStorage.getItem("AuthToken");if(!e)return!1;try{return j.a.verify(e,k,N)}catch(a){return e&&localStorage.removeItem("AuthToken"),!1}}var S=function(e){var a=e.component,t=e.componentCallback,n=Object(C.a)(e,["component","componentCallback"]);return i.a.createElement(x.b,Object.assign({},n,{render:function(e){return H()?i.a.createElement(a,Object.assign({},e,{componentCallback:t})):i.a.createElement(x.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},I=(t(494),function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).dragHandler=t.dragHandler.bind(Object(d.a)(t)),t.onChangeHandler=t.onChangeHandler.bind(Object(d.a)(t)),t.state={filename:"",isOver:!1},t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"dragHandler",value:function(e){if(e.preventDefault(),e.stopPropagation(),console.log(e.type),"drop"===e.type||"dragleave"===e.type?this.setState({isOver:!1}):this.setState({isOver:!0}),"drop"===e.type&&1===e.dataTransfer.items.length){var a=e.dataTransfer.files[0];a&&this.updateFile(a)}}},{key:"onChangeHandler",value:function(e){this.setState({filename:e.target.files[0].name}),this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){return i.a.createElement("div",{className:this.state.isOver?"upload-box has-advanced-upload is-dragover":"upload-box has-advanced-upload",onDrag:this.dragHandler,onDragStart:this.dragHandler,onDragEnd:this.dragHandler,onDragOver:this.dragHandler,onDragEnter:this.dragHandler,onDragLeave:this.dragHandler,onDrop:this.dragHandler},i.a.createElement("i",{"aria-hidden":"true",className:"huge upload icon"}),i.a.createElement("div",null,i.a.createElement("input",{id:"file",type:"file",multiple:!1,required:!0,onChange:this.onChangeHandler}),i.a.createElement("label",{htmlFor:"file"},this.state.filename?this.state.filename:i.a.createElement("div",null,i.a.createElement("strong",null,"Selecione um arquivo"),i.a.createElement("span",null," ou solte o aqui")))))}}]),a}(i.a.Component)),D=t(5),F=t.n(D),w=function(e,a){return e&&a},P=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).onClickHandler=t.onClickHandler.bind(Object(d.a)(t)),t.state={className:""},t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"onClickHandler",value:function(e){this.props.onSelect&&this.props.element&&this.props.onSelect(this.props.element)}},{key:"render",value:function(){var e=this.props,a=e.active,t=e.className,n=F()("item",w(a,"active"),t);return i.a.createElement("div",{role:"listitem",className:n,onClick:this.onClickHandler},this.props.children)}}]),a}(i.a.Component),R=function(e){function a(){return Object(s.a)(this,a),Object(c.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this.props,a=e.size,t=e.className,n=e.animated,l=e.divided,r=e.relaxed,s=e.selection,o=F()("ui",w(n,"animated"),w(l,"divided"),w(r,"relaxed"),w(s,"selection"),a,"list",t);return i.a.createElement("div",{role:"list",className:o},this.props.children)}}]),a}(i.a.Component);R.Item=P;var A=R,M=t(709),T=(t(495),i.a.Component,function(e){function a(){return Object(s.a)(this,a),Object(c.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e;return i.a.createElement("div",{className:"ui segment",style:{minHeight:"100%"}},i.a.createElement("div",{className:"ui active transition visible inverted dimmer"},i.a.createElement("div",{className:"content"},i.a.createElement("div",{className:"ui big text loader"},null!==(e=this.props.message)&&void 0!==e?e:"Carregando"))))}}]),a}(i.a.Component)),L=t(45),q=t.n(L),z=t(133),U=q()("\n    mutation salvarExame($exame: ExameInput!){\n        salvarExame(exame: $exame){\n            id,\n            protocolo,\n            nome,\n            dataExame\n        }\n    }\n"),V=function(e){var a=e.children,t=Object(z.a)(U),n=Object(O.a)(t,2);return a(n[0],n[1])},$=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).handleFile=t.handleFile.bind(Object(d.a)(t)),t.handleInputChange=t.handleInputChange.bind(Object(d.a)(t)),t.submitHandle=t.submitHandle.bind(Object(d.a)(t)),t.state={nome:"",protocolo:"",dataExame:"",possuiMarcapasso:!1,observacoes:"",exameFile:null,processando:!1},t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"handleFile",value:function(e){var a=this,t=e.target,n=(t.validity,Object(O.a)(t.files,1)[0]);if(FileReader&&n){var i=new FileReader;i.onloadend=function(){a.setState({exameFile:n})},i&&i.readAsDataURL(n)}}},{key:"handleInputChange",value:function(e){var a=e.target,t="checkbox"===a.type?a.checked:a.value,n=a.name;this.setState(Object(p.a)({},n,t))}},{key:"submitHandle",value:function(e){var a=this;e.preventDefault(),this.setState({processando:!0}),this.props.mutation({variables:{exame:{exameFile:this.state.exameFile,protocolo:this.state.protocolo,dataExame:this.state.dataExame,nome:this.state.nome,possuiMarcapasso:this.state.possuiMarcapasso,observacoes:this.state.observacoes}}}).then((function(e){a.props.onSubmited&&a.props.onSubmited({status:"Sucesso",result:e.data.salvarExame,message:"Novo cadastro de exame para ".concat(a.state.nome," finalizado com sucesso.")})})).catch((function(e){a.props.onSubmited&&a.props.onSubmited({status:"Sucesso",result:e,message:"Ocorreu um erro ao realizar o cadastro do exame."})}))}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("form",{className:"ui form dimmable",onSubmit:this.submitHandle},i.a.createElement("div",{className:"ui inverted dimmer ".concat(this.state.processando?"active":"")},i.a.createElement("div",{className:"content"},i.a.createElement("div",{className:"ui text loader"},"Salvando Registro"))),i.a.createElement("div",{className:"field"},i.a.createElement(I,{onChange:this.handleFile})),i.a.createElement("div",{className:"fields"},i.a.createElement("div",{className:"inline fluid field"},i.a.createElement("label",null,"Protocolo:"),i.a.createElement("input",{type:"text",name:"protocolo",required:!0,value:this.state.protocolo,onChange:this.handleInputChange})),i.a.createElement("div",{className:"inline field"},i.a.createElement("label",null,"Data Exame"),i.a.createElement("input",{name:"dataExame",type:"date",required:!0,value:this.state.dataExame,onChange:this.handleInputChange}))),i.a.createElement("div",{className:"field"},i.a.createElement("label",null,"Nome"),i.a.createElement("input",{className:"ui input",type:"text",required:!0,name:"nome",value:this.state.nome,onChange:this.handleInputChange})),i.a.createElement("h3",{className:"ui dividing header"},"Informa\xe7\xf5es Opcionais"),i.a.createElement("div",{className:"field"},i.a.createElement("div",{className:"ui toggle checkbox"},i.a.createElement("input",{type:"checkbox",tabIndex:"0",name:"possuiMarcapasso",value:this.state.possuiMarcapasso,onChange:this.handleInputChange}),i.a.createElement("label",null,"Possui Marca-passo?"))),i.a.createElement("div",{className:"field"},i.a.createElement("label",null,"Outras Observa\xe7\xf5es:"),i.a.createElement("textarea",{id:"info",rows:"5",name:"observacoes",value:this.state.observacoes,onChange:this.handleInputChange})),i.a.createElement("div",{className:"field"},i.a.createElement("input",{type:"submit",className:"ui fluid green button",value:"Cadastrar"}))))}}]),a}(i.a.Component),B=function(e){var a=e.onSubmited;return i.a.createElement(V,null,(function(e,t){var n=Object.assign({},t);return i.a.createElement($,Object.assign({onSubmited:a,mutation:e},n))}))},G=(t(571),t(59)),W=t(696);function Q(){var e=Object(G.a)(["\n    query listarExames($filter: ExamQuery){\n        listarExames(filter: $filter){\n            id,\n            protocolo,\n            dataExame,\n            nome,\n            dataCadastro,\n            url,\n            possuiMarcapasso,\n            observacoes,\n            status\n        }\n    }\n"]);return Q=function(){return e},e}var J=q()(Q()),Y=function(e){var a=e.children,t=e.variables;return i.a.createElement(W.b,{variables:t,query:J},a)},K=q()("\n    mutation saveExamResult($examResult: ExamResultInput!){\n        saveExamResult(examResult: $examResult)\n    }\n"),X=function(e){var a=e.children;return i.a.createElement(W.a,{mutation:K},a)},_=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).onCloseHandler=t.onCloseHandler.bind(Object(d.a)(t)),t.onOpenHandler=t.onOpenHandler.bind(Object(d.a)(t)),t.onSubmitHandler=t.onSubmitHandler.bind(Object(d.a)(t)),t.fileChangedHandler=t.fileChangedHandler.bind(Object(d.a)(t)),t.state={examFile:null},t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"onCloseHandler",value:function(e,a){this.props.onClose&&this.props.onClose(e,a)}},{key:"onOpenHandler",value:function(e,a){this.props.onOpen&&this.props.onOpen(e,a)}},{key:"fileChangedHandler",value:function(e){var a=this,t=e.target,n=(t.validity,Object(O.a)(t.files,1)[0]);if(FileReader&&n){var i=new FileReader;i.onloadend=function(){a.setState({examFile:n})},i&&i.readAsDataURL(n)}}},{key:"onSubmitHandler",value:function(e){var a=this;e.preventDefault(),this.props.mutation&&this.props.mutation({variables:{examResult:{examResultFile:this.state.examFile,examId:this.props.id}}}).then((function(e){a.props.onSubmit&&a.props.onSubmit({examUrl:e.data.saveExamResult,examId:a.props.id}),a.onCloseHandler(null,null)})).catch((function(e){}))}},{key:"render",value:function(){var e=this.props.mutation&&this.props.allowExamResultUpload;return i.a.createElement(f.a,{onClose:this.onCloseHandler,open:this.props.isOpen,onOpen:this.onOpenHandler},i.a.createElement(f.a.Header,null,e?i.a.createElement("h3",{className:"ui header"},"Enviar Laudo"):i.a.createElement("h3",{className:"ui header"},"Detalhar Registro")),i.a.createElement(f.a.Content,null,i.a.createElement("form",{className:"ui form",onSubmit:this.onSubmitHandler},e&&i.a.createElement("div",{className:"field"},i.a.createElement(I,{onChange:this.fileChangedHandler})),i.a.createElement("div",{className:"fields"},i.a.createElement("div",{className:"field"},i.a.createElement("label",null,"Protocolo: "),i.a.createElement("input",{type:"text",className:"ui input",readOnly:!0,value:this.props.protocolo})),i.a.createElement("div",{className:"field"},i.a.createElement("label",null,"Data Exame"),i.a.createElement("input",{type:"date",className:"ui input",readOnly:!0,value:this.props.dataExame}))),i.a.createElement("div",{className:"field"},i.a.createElement("label",null,"Nome"),i.a.createElement("input",{type:"text",className:"ui input",readOnly:!0,value:this.props.nome})),i.a.createElement("div",{className:"field"},i.a.createElement("div",{className:"ui toggle checkbox"},i.a.createElement("input",{type:"checkbox",className:"hidden",tabIndex:"0",defaultChecked:this.props.possuiMarcapasso}),i.a.createElement("label",null,"Possui Marca-passo?"))),i.a.createElement("div",{className:"field"},i.a.createElement("textarea",{readOnly:!0,value:this.props.observacoes})),e&&i.a.createElement("button",{className:"ui fluid positive button"},"Salvar Laudo"))))}}]),a}(i.a.Component),Z=function(e){var a=Object.assign({},e);return i.a.createElement(X,null,(function(e,t){var n=Object.assign({},t);return i.a.createElement(_,Object.assign({mutation:e},a,n))}))};function ee(){var e=Object(G.a)(["\n    subscription onSavedExam($id: ID, $companyId: ID){\n        savedExam(id: $id,companyId: $companyId){\n            id,\n            protocolo,\n            nome,\n            dataExame\n            dataCadastro,\n            observacoes,\n            possuiMarcapasso,\n            url,\n            status\n        }\n    }\n"]);return ee=function(){return e},e}var ae=q()(ee()),te=function(e){function a(e){var t,n,i,l;return Object(s.a)(this,a),(l=Object(c.a)(this,Object(u.a)(a).call(this,e))).subscribeForMore=function(){var e=H();e&&l.props.subscribeToMore({document:ae,variables:{id:e.companyId},updateQuery:function(e,a){var t=a.subscriptionData;if(!t.data)return e;var n=t.data.savedExam;return e.listarExames.find((function(e){return e.id===n.id}))?e:Object.assign({},e,{listarExames:Object.assign([],e.listarExames,[].concat(Object(h.a)(e.listarExames),[n]))})}})},l.onLoadedHandler(null!==(t=null===e||void 0===e?void 0:null===(n=e.data)||void 0===n?void 0:null===(i=n.listarExames)||void 0===i?void 0:i.length)&&void 0!==t?t:0),l.onCloseDetailHandler=l.onCloseDetailHandler.bind(Object(d.a)(l)),l.examDetailClickHandler=l.examDetailClickHandler.bind(Object(d.a)(l)),l.state={isExamDetailOpen:!1,selectedExam:null},l.subscribeForMore(),l}return Object(m.a)(a,e),Object(o.a)(a,[{key:"onLoadedHandler",value:function(e){this.props.onLoaded&&this.props.onLoaded(e)}},{key:"filtrar",value:function(e){return e.protocolo.match(this.state.filter)||e.nome.match(this.state.filter)}},{key:"onCloseDetailHandler",value:function(){this.setState({isExamDetailOpen:!1})}},{key:"examDetailClickHandler",value:function(e){this.setState({isExamDetailOpen:!0,selectedExam:e})}},{key:"render",value:function(){var e=this;if(this.props.loading)return i.a.createElement(T,null);if(this.props.error)return i.a.createElement("div",null,"Erro...");var a=this.props.data.listarExames;return this.props.textFilter&&(a=this.resultList.filter(this.filtrar)),i.a.createElement("div",null,i.a.createElement("div",null,"Total de Registros: ",this.props.data.listarExames.length),i.a.createElement("div",{className:"tabelaContainer"},i.a.createElement("div",{className:"ui doubling four stackable tiny cards"},i.a.createElement(M.a.Group,{animation:"fade left",duration:"1000"},a.map((function(a){var t="WAITING"===a.status;return i.a.createElement("div",{key:a.id,className:"ui ".concat(t?"yellow":"green"," card")},i.a.createElement("div",{className:"content"},i.a.createElement("div",{className:"header"},i.a.createElement("div",{className:"light label inline"},i.a.createElement("label",null,"Protocolo:"),i.a.createElement("div",null,a.protocolo)),i.a.createElement("div",{className:"label inline"},a.nome)),i.a.createElement("div",{className:"meta"},i.a.createElement("div",{className:"ui ribbon label"},"Cadastro Realizado em ".concat(a.dataCadastro))),i.a.createElement("div",{className:"description bottom"},i.a.createElement("div",{className:"ui label"},"Possui marcapasso:",i.a.createElement("i",{"aria-hidden":"true",className:"".concat(a.possuiMarcapasso?"green check":"red close"," icon")})),i.a.createElement("textarea",{rows:"3",readOnly:!0,value:a.observacoes,style:{marginTop:"10px",width:"100%",lineHeight:"1.2857",resize:"none",border:"none"}}))),i.a.createElement("div",{className:"extra content"},i.a.createElement("div",{className:"ui bottom attached buttons"},i.a.createElement("button",{className:"ui primary small button btn-default'",onClick:function(){return e.examDetailClickHandler(a)}},"Detalhar"),!t&&i.a.createElement("a",{href:a.url,className:"ui secondary small button btn-default"},"Acessar Laudo"))))}))),i.a.createElement(_,Object.assign({onClose:this.onCloseDetailHandler},this.state.selectedExam,{isOpen:this.state.isExamDetailOpen})))))}}]),a}(i.a.Component),ne=function(e){var a=Object.assign({},e);return i.a.createElement(Y,{variables:a.variables},(function(e){var t=Object.assign({},e);return i.a.createElement(te,Object.assign({},a,t))}))},ie=function(e){function a(e){var t,n,i,l,r,o;return Object(s.a)(this,a),(o=Object(c.a)(this,Object(u.a)(a).call(this,e))).clearHandle=o.clearHandle.bind(Object(d.a)(o)),o.filterHandle=o.filterHandle.bind(Object(d.a)(o)),o.inputChangedHandle=o.inputChangedHandle.bind(Object(d.a)(o)),o.state={protocolNumber:null!==(t=e.protocolNumber)&&void 0!==t?t:"",name:null!==(n=e.name)&&void 0!==n?n:"",examDate:null!==(i=e.examDate)&&void 0!==i?i:"",isReleased:null!==(l=e.isReleased)&&void 0!==l&&l,isInProgress:null!==(r=e.isInProgress)&&void 0!==r&&r},o}return Object(m.a)(a,e),Object(o.a)(a,[{key:"inputChangedHandle",value:function(e){var a=e.target,t="checkbox"===a.type?a.checked:a.value,n=a.name;this.setState(Object(p.a)({},n,t))}},{key:"clearHandle",value:function(){this.setState({protocolNumber:"",name:"",examDate:"",isReleased:!1,isInProgress:!1})}},{key:"filterHandle",value:function(){this.props.onApplyFilter&&this.props.onApplyFilter(this.state)}},{key:"render",value:function(){return i.a.createElement("div",{className:"ui card"},i.a.createElement("div",{className:"content"},i.a.createElement("form",{className:"ui form"},i.a.createElement("div",{className:"field"},i.a.createElement("label",null,"Protocolo"),i.a.createElement("input",{type:"text",name:"protocolNumber",value:this.state.protocolNumber,onChange:this.inputChangedHandle})),i.a.createElement("div",{className:"field"},i.a.createElement("label",null,"Nome"),i.a.createElement("input",{type:"text",name:"name",value:this.state.name,onChange:this.inputChangedHandle})),i.a.createElement("div",{className:"field"},i.a.createElement("label",null,"Data Exame"),i.a.createElement("input",{type:"date",name:"examDate",value:this.state.examDate,onChange:this.inputChangedHandle})),i.a.createElement("div",{className:"field"},i.a.createElement("div",{className:"ui toggle checkbox"},i.a.createElement("input",{type:"checkbox",tabIndex:"0",name:"isReleased",checked:this.state.isReleased,onChange:this.inputChangedHandle}),i.a.createElement("label",null,"Liberado"))),i.a.createElement("div",{className:"field"},i.a.createElement("div",{className:"ui toggle checkbox"},i.a.createElement("input",{type:"checkbox",tabIndex:"0",name:"isInProgress",checked:this.state.isInProgress,onChange:this.inputChangedHandle}),i.a.createElement("label",null,"Em andamento"))))),i.a.createElement("div",{className:"extra content"},i.a.createElement("button",{className:"ui primary button",onClick:this.clearHandle},"Limpar"),i.a.createElement("button",{className:"ui primary button",onClick:this.filterHandle},"Aplicar Filtro")))}}]),a}(i.a.Component),le=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).buttonClickHandler=t.buttonClickHandler.bind(Object(d.a)(t)),t.cadastrarExameCloseHandler=t.cadastrarExameCloseHandler.bind(Object(d.a)(t)),t.handleInputChange=t.handleInputChange.bind(Object(d.a)(t)),t.loadedHandler=t.loadedHandler.bind(Object(d.a)(t)),t.submitHandle=t.submitHandle.bind(Object(d.a)(t)),t.cadastroFinalizadoHandler=t.cadastroFinalizadoHandler.bind(Object(d.a)(t)),t.openFilterHandler=t.openFilterHandler.bind(Object(d.a)(t)),t.closeFilterHandler=t.closeFilterHandler.bind(Object(d.a)(t)),t.appliedFilterHandler=t.appliedFilterHandler.bind(Object(d.a)(t)),t.state={isCadastrarExameOpen:!1,isCadastroFinalizadoModalOpen:!1,isPopupFilterOpen:!1,filter:{},textFilter:"",cadastraExameResult:null},t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"buttonClickHandler",value:function(){this.setState({isCadastrarExameOpen:!this.state.isCadastrarExameOpen})}},{key:"cadastrarExameCloseHandler",value:function(){this.setState({isCadastrarExameOpen:!1})}},{key:"modoExibicao",value:function(e){this.setState({exibicaoTabela:e})}},{key:"handleInputChange",value:function(e){var a=e.target,t="checkbox"===a.type?a.checked:a.value,n=a.name;this.setState(Object(p.a)({},n,t))}},{key:"submitHandle",value:function(e){this.setState({isCadastrarExameOpen:!1,isCadastroFinalizadoModalOpen:!0,cadastraExameResult:e})}},{key:"cadastroFinalizadoHandler",value:function(){this.setState({isCadastroFinalizadoModalOpen:!1})}},{key:"openFilterHandler",value:function(){this.setState({isPopupFilterOpen:!0})}},{key:"closeFilterHandler",value:function(){this.setState({isPopupFilterOpen:!1})}},{key:"appliedFilterHandler",value:function(e){this.setState({isPopupFilterOpen:!1,filter:e})}},{key:"loadedHandler",value:function(e){this.setState({registriesCount:e})}},{key:"qtdFiltro",value:function(){var e=0;return this.state.filter.name&&e++,this.state.filter.protocolNumber&&e++,this.state.filter.examDate&&e++,this.state.filter.isReleased&&e++,this.state.filter.isInProgress&&e++,e}},{key:"getFilter",value:function(){var e=[];return this.state.filter.isInProgress&&(e=Object.assign([],e,[].concat(Object(h.a)(e),["WAITING"]))),this.state.filter.isReleased&&(e=Object.assign([],e,[].concat(Object(h.a)(e),["READY"]))),{filter:{protocolNumber:this.state.filter.protocolNumber,name:this.state.filter.name,examDate:this.state.filter.examDate,status:e}}}},{key:"render",value:function(){var e,a,t;return i.a.createElement("div",{style:{height:"85%"}},i.a.createElement("div",{className:"ui menu"},i.a.createElement("a",{className:"item",onClick:this.buttonClickHandler},i.a.createElement("i",{"aria-hidden":"true",className:"add icon"}),"Novo Exame"),i.a.createElement("div",{className:"right menu"},i.a.createElement(b.a,{on:"click",onOpen:this.openFilterHandler,onClose:this.closeFilterHandler,open:this.state.isPopupFilterOpen,position:"bottom right",trigger:i.a.createElement(v.a.Item,{active:this.state.isPopupFilterOpen},i.a.createElement("i",{className:"filter icon"}),this.qtdFiltro()>0&&i.a.createElement(b.a,{trigger:i.a.createElement(E.a,{color:"teal",floating:!0,circular:!0},this.qtdFiltro())},this.qtdFiltro()))},i.a.createElement(ie,Object.assign({},this.state.filter,{onApplyFilter:this.appliedFilterHandler}))),i.a.createElement("div",{className:"item"},i.a.createElement("div",{className:"ui icon input"},i.a.createElement("input",{type:"text",placeholder:"Protocolo / Nome",name:"textFilter",value:this.state.textFilter,onChange:this.handleInputChange}),i.a.createElement("i",{"aria-hidden":"true",className:"search icon"}))))),i.a.createElement("div",{className:"ui segment",style:{minHeight:"100%"}},i.a.createElement(ne,{variables:this.getFilter(),textFilter:this.state.textFilter,onLoaded:this.loadedHandler})),i.a.createElement(f.a,{onClose:this.cadastrarExameCloseHandler,open:this.state.isCadastrarExameOpen},i.a.createElement(g.a,{icon:"upload",content:"Cadastrar novo exame"}),i.a.createElement(f.a.Content,null,i.a.createElement(B,{onSubmited:this.submitHandle}))),i.a.createElement(f.a,{onClose:this.cadastroFinalizadoHandler,open:this.state.isCadastroFinalizadoModalOpen},i.a.createElement(g.a,{icon:"Sucesso"===(null===(e=this.state)||void 0===e?void 0:null===(a=e.cadastraExameResult)||void 0===a?void 0:a.status)?"green icon check":"red icon thumbs down"}),i.a.createElement(f.a.Content,null,i.a.createElement("div",null,null===(t=this.state.cadastraExameResult)||void 0===t?void 0:t.message))))}}]),a}(i.a.Component);function re(){var e=Object(G.a)(["\n    query getCompanies{\n        getCompanies{\n            id\n            name\n        }\n    }\n"]);return re=function(){return e},e}var se=q()(re()),oe=function(e){var a=e.children;return i.a.createElement(W.b,{query:se},a)},ce=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).selectionChangedHandler=t.selectionChangedHandler.bind(Object(d.a)(t)),t.state={selectedValue:t.props.selectValue},t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"selectionChangedHandler",value:function(e){e.id&&this.setState((function(a){return{selectedValue:a.selectedValue===e.id?null:e.id}})),this.props.onSelectionChanged&&this.props.onSelectionChanged(this.state.selectedValue===e.id?null:e)}},{key:"render",value:function(){var e=this;return this.props.loading?i.a.createElement("div",null,"Loading..."):this.props.error?i.a.createElement("div",null,"Erro..."):i.a.createElement("div",null,i.a.createElement(A,{animated:!0,divided:!0,relaxed:!0,size:"huge",selection:!0},this.props.data.getCompanies.map((function(a){return i.a.createElement(A.Item,{key:a.id,element:a,active:e.state.selectedValue===a.id,onSelect:e.selectionChangedHandler},a.name)}))))}}]),a}(i.a.Component),ue=function(e){var a=Object.assign({},e);return i.a.createElement(oe,null,(function(e){var t=Object.assign({},e);return i.a.createElement(ce,Object.assign({},t,a))}))};function de(){var e=Object(G.a)(["\n    query listarExamesPorCliente($filter: ExamByCompanyQuery){\n        listarExamesPorCliente(filter: $filter){\n            id,\n            protocolo,\n            nome,\n            dataExame,\n            dataCadastro,\n            observacoes,\n            possuiMarcapasso,\n            url,           \n            status\n        }\n    }"]);return de=function(){return e},e}var me=q()(de()),he=function(e){var a=e.children,t=e.variables;return i.a.createElement(W.b,{variables:t,query:me},a)},pe=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).onCloseExamDetailHandler=t.onCloseExamDetailHandler.bind(Object(d.a)(t)),t.onSeeDetailClick=t.onSeeDetailClick.bind(Object(d.a)(t)),t.onSubmitResulHandler=t.onSubmitResulHandler.bind(Object(d.a)(t)),t.state={isExamDetailOpen:!1,selectedExam:null},t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"onCloseExamDetailHandler",value:function(){this.setState({isExamDetailOpen:!1,selectedExam:null})}},{key:"onSubmitResulHandler",value:function(){var e;this.props.refetch&&this.props.refetch(null!==(e=this.props.variables)&&void 0!==e?e:null)}},{key:"onSeeDetailClick",value:function(e){this.setState({isExamDetailOpen:!0,selectedExam:e})}},{key:"render",value:function(){var e,a=this;if(this.props.data)return i.a.createElement("div",{className:"ui doubling four stackable tiny cards"},i.a.createElement(M.a.Group,{animation:"fade left",duration:"1000"},this.props.data.map((function(e){var t="WAITING"===e.status;return i.a.createElement("div",{key:e.id,className:"ui ".concat(t?"yellow":"green"," card")},i.a.createElement("div",{className:"content"},i.a.createElement("div",{className:"header"},i.a.createElement("div",{className:"light label inline"},i.a.createElement("label",null,"Protocolo:"),i.a.createElement("div",null,e.protocolo)),i.a.createElement("div",{className:"label inline"},e.nome)),i.a.createElement("div",{className:"meta"},i.a.createElement("div",{className:"ui ribbon label"},"Exame Realizado em ".concat(e.dataExame))),i.a.createElement("div",{className:"description bottom"},i.a.createElement("div",{className:"ui label"},"Possui marcapasso:",i.a.createElement("i",{"aria-hidden":"true",className:"".concat(e.possuiMarcapasso?"green check":"red close"," icon")})),i.a.createElement("textarea",{rows:"3",readOnly:!0,value:e.observacoes,style:{marginTop:"10px",width:"100%",lineHeight:"1.2857",resize:"none",border:"none"}}))),i.a.createElement("div",{className:"extra content"},i.a.createElement("div",null,i.a.createElement("button",{className:"ui left attached primary small button btn-default",onClick:function(){return a.onSeeDetailClick(e)}},"".concat("WAITING"===e.status?"Enviar Laudo":"Detalhar"," ")),t&&i.a.createElement("a",{href:e.url,className:"ui right attached secondary small button"},"Baixar Exame"))))}))),i.a.createElement(Z,Object.assign({isOpen:this.state.isExamDetailOpen,allowExamResultUpload:"WAITING"===(null===(e=this.state.selectedExam)||void 0===e?void 0:e.status)},this.state.selectedExam,{onClose:this.onCloseExamDetailHandler,onSubmit:this.onSubmitResulHandler})))}}]),a}(i.a.Component),be=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).subscribeForMore=function(e){var a=H();a&&t.props.subscribeToMore({document:ae,variables:{id:e,companyId:a.companyId},updateQuery:function(e,a){var t=a.subscriptionData;if(!t.data)return e;var n=t.data.savedExam;return e.listarExamesPorCliente.find((function(e){return e.id===n.id}))?e:Object.assign({},e,{listarExamesPorCliente:Object.assign([],e.listarExamesPorCliente,[].concat(Object(h.a)(e.listarExamesPorCliente),[n]))})}})},t.filtrar=t.filtrar.bind(Object(d.a)(t)),t.state={exibicaoTabela:!0,filter:t.props.filter,companies:[]},t.subscribeForMore(),t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){e.variables.filter.companyId&&!this.state.companies.find((function(a){return a===e.variables.filter.companyId}))&&(console.log(e),this.setState({companies:Object.assign([],this.state.companies,[].concat(Object(h.a)(this.state.companies),[e.variables.filter.companyId]))}),this.subscribeForMore(e.variables.filter.companyId)),console.log(this.state.companies)}},{key:"filtrar",value:function(e){return e.protocolo.match(this.state.filter)||e.nome.match(this.state.filter)}},{key:"render",value:function(){var e,a;if(this.props.loading)return i.a.createElement(T,null);if(this.props.error)return i.a.createElement("div",null,"Erro...");var t=this.props.data.listarExamesPorCliente;return this.state.filter&&t&&(t=t.filter(this.filtrar)),i.a.createElement("div",{className:"ui segment"},i.a.createElement("div",null,"Total de Registros: ",this.props.data.listarExamesPorCliente.length),i.a.createElement("div",null,"Empresa: ",null!==(e=null===(a=this.props.selectedCompany)||void 0===a?void 0:a.name)&&void 0!==e?e:"Todas"),i.a.createElement("div",{className:"tabelaContainer"},i.a.createElement(pe,{refetch:this.props.refetch,variables:this.props.variables,saveExamResult:!0,data:t})))}}]),a}(i.a.Component),ve=function(e){var a=Object.assign({},e);return i.a.createElement(he,{variables:a.variables},(function(e){var t=Object.assign({},e);return i.a.createElement(be,Object.assign({},t,a))}))},Ee=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).modoExibicao=t.modoExibicao.bind(Object(d.a)(t)),t.handleInputChange=t.handleInputChange.bind(Object(d.a)(t)),t.companySelectionChanged=t.companySelectionChanged.bind(Object(d.a)(t)),t.state={exibicaoTabela:!0,selectedCompanyId:null},t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){this.setState({exibicaoTabela:!0})}},{key:"modoExibicao",value:function(e){this.setState({exibicaoTabela:e})}},{key:"handleInputChange",value:function(e){var a=e.target,t="checkbox"===a.type?a.checked:a.value,n=a.name;this.setState(Object(p.a)({},n,t))}},{key:"companySelectionChanged",value:function(e){this.setState({selectedCompany:e})}},{key:"getVariables",value:function(){var e,a,t;return{filter:{status:null,dataExame:null,protocolo:null,companyId:null!==(e=null===(a=this.state)||void 0===a?void 0:null===(t=a.selectedCompany)||void 0===t?void 0:t.id)&&void 0!==e?e:null}}}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("div",{className:"ui menu"},i.a.createElement("div",{className:"right menu"},i.a.createElement(v.a.Item,{active:!this.state.exibicaoTabela,onClick:function(){return e.modoExibicao(!1)}},i.a.createElement("i",{"aria-hidden":"true",className:"icon list"})),i.a.createElement(v.a.Item,{active:this.state.exibicaoTabela,onClick:function(){return e.modoExibicao(!0)}},i.a.createElement("i",{"aria-hidden":"true",className:"icon th"})),i.a.createElement("div",{className:"item"},i.a.createElement("div",{className:"ui icon input"},i.a.createElement("input",{type:"text",placeholder:"Filtro",name:"filter",value:this.state.filter,onChange:this.handleInputChange}),i.a.createElement("i",{"aria-hidden":"true",className:"search icon"}))))),i.a.createElement("div",{className:"ui divided grid"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"four wide column"},i.a.createElement("div",{className:"ui segment"},i.a.createElement(ue,{onSelectionChanged:this.companySelectionChanged}))),i.a.createElement("div",{className:"twelve wide column"},i.a.createElement(ve,{variables:this.getVariables(),selectedCompany:this.state.selectedCompany,exibicaoTabela:this.state.exibicaoTabela})))))}}]),a}(i.a.Component),fe=function(){return i.a.createElement(Ee,null)},ge=t(707),Oe=t(699),Ce=t(708),xe=t(703),ye=t(702),je=t(97),ke=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).handleSubmit=t.handleSubmit.bind(Object(d.a)(t)),t.handleInputChange=t.handleInputChange.bind(Object(d.a)(t)),t.state={error:!1,duration:800,userName:"",password:"",isLogged:!1},t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"handleSubmit",value:function(e){var a=this;e.preventDefault(),fetch("".concat(je.appUrl,"/auth"),{method:"post",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"userName=".concat(this.state.userName,"&password=").concat(this.state.password)}).then((function(e){if(200===e.status)return e.json();throw new Error(e.Message)}),(function(e){return a.setState({error:!0}),e})).then((function(e){a.setState({isLogged:!0}),localStorage.setItem("AuthToken",e.token),a.props.componentCallback(!0)})).catch((function(e){a.setState({error:!0})}))}},{key:"handleInputChange",value:function(e){var a=e.target,t="checkbox"===a.type?a.checked:a.value,n=a.name;this.setState(Object(p.a)({},n,t))}},{key:"render",value:function(){return H()||this.state.isLogged?i.a.createElement(x.a,{to:"/"}):i.a.createElement(ge.a,{textAlign:"center",verticalAlign:"middle",style:{height:"100vh"}},i.a.createElement(ge.a.Column,{style:{maxWidth:450}},i.a.createElement(M.a.Group,{animation:"fade up",duration:800},i.a.createElement(Oe.a,{error:this.state.error,size:"large",onSubmit:this.handleSubmit},i.a.createElement(Ce.a,null,i.a.createElement(Oe.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"E-mail address",name:"userName",value:this.state.userName,onChange:this.handleInputChange}),i.a.createElement(Oe.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",required:!0,placeholder:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleInputChange}),i.a.createElement(xe.a,{color:"teal",fluid:!0,size:"large"},"Login"),i.a.createElement(ye.a,{error:!0,header:"Error ao realizar login",content:this.state.error}))))))}}]),a}(i.a.Component),Ne=function(e){function a(){return Object(s.a)(this,a),Object(c.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){localStorage.removeItem("AuthToken"),this.props.componentCallback(!1)}},{key:"render",value:function(){return i.a.createElement(x.a,{to:"/login"})}}]),a}(i.a.Component);t(672),t(673);function He(){var e=Object(G.a)(["\n    query test{\n        test\n    }\n"]);return He=function(){return e},e}function Se(){var e=Object(G.a)(["\n    subscription onTest($id: ID){\n        test(id: $id)\n    }\n"]);return Se=function(){return e},e}var Ie=q()("\n    mutation testMutation{\n        testMutation\n    }\n"),De=q()(Se()),Fe=q()(He()),we=function(e){function a(e){var t,n;return Object(s.a)(this,a),(n=Object(c.a)(this,Object(u.a)(a).call(this,e))).clearHandle=n.clearHandle.bind(Object(d.a)(n)),n.inputChangedHandle=n.inputChangedHandle.bind(Object(d.a)(n)),console.log(n.props.query),n.state={name:null!==(t=e.name)&&void 0!==t?t:""},n}return Object(m.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.query.subscribeToMore({document:De,updateQuery:function(e,a){var t=a.subscriptionData;if(!t.data)return e;var n=t.data.savedExam;return e.listarExames.find((function(e){return e.id===n.id}))?e:Object.assign({},e,{listarExames:Object.assign([],e.listarExames,[].concat(Object(h.a)(e.listarExames),[n]))})}})}},{key:"inputChangedHandle",value:function(e){var a=e.target,t="checkbox"===a.type?a.checked:a.value,n=a.name;this.setState(Object(p.a)({},n,t))}},{key:"clearHandle",value:function(){var e=this;this.setState({protocolNumber:"",name:"",isReleased:!1,isInProgress:!1}),this.props.mutation().then((function(a){e.setState({name:a.data.testMutation})}))}},{key:"filterHandle",value:function(){}},{key:"render",value:function(){return this.props.query.loading?i.a.createElement("div",null,"Loading..."):this.props.query.error?i.a.createElement("div",null,"Erro..."):i.a.createElement("div",null,i.a.createElement("input",{type:"text",name:"name",value:this.props.query.data.test,onChange:this.inputChangedHandle}),i.a.createElement("input",{type:"button",onClick:this.clearHandle,value:"Limpar"}))}}]),a}(i.a.Component),Pe=function(){return i.a.createElement(W.a,{mutation:Ie},(function(e,a){var t=Object.assign({},a);return i.a.createElement(W.b,{query:Fe},(function(a){var n=Object.assign({},a);return i.a.createElement(we,Object.assign({mutation:e},t,{query:n}))}))}))},Re=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).handleSubmit=t.handleSubmit.bind(Object(d.a)(t)),t.handleInputChange=t.handleInputChange.bind(Object(d.a)(t)),t.state={error:!1,duration:800,oldPassword:"",newPassword:""},t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){try{var e=H();this.setState({userName:e.userName})}catch(a){}}},{key:"handleSubmit",value:function(e){var a=this;e.preventDefault(),fetch("".concat(je.appUrl,"/changepassword"),{method:"post",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8",authorization:localStorage.getItem("AuthToken")},body:"oldPassword=".concat(this.state.oldPassword,"&newPassword=").concat(this.state.newPassword)}).then((function(e){if(200!==e.status)throw new Error(e.Message)})).catch((function(e){a.setState({error:!0})}))}},{key:"handleInputChange",value:function(e){var a=e.target,t="checkbox"===a.type?a.checked:a.value,n=a.name;this.setState(Object(p.a)({},n,t))}},{key:"render",value:function(){return i.a.createElement(ge.a,{textAlign:"center",verticalAlign:"middle",style:{height:"100vh"}},i.a.createElement(ge.a.Column,{style:{maxWidth:450}},i.a.createElement(M.a.Group,{animation:"fade up",duration:800},i.a.createElement(Oe.a,{error:this.state.error,size:"large",onSubmit:this.handleSubmit},i.a.createElement(Ce.a,null,i.a.createElement(Oe.a.Input,{fluid:!0,icon:"user",iconPosition:"left",readOnly:!0,type:"text",name:"user",value:this.state.userName,onChange:this.handleInputChange}),i.a.createElement(Oe.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",required:!0,placeholder:"Senha atual",type:"password",name:"oldPassword",value:this.state.oldPassword,onChange:this.handleInputChange}),i.a.createElement(Oe.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",required:!0,placeholder:"Nova senha",type:"password",name:"newPassword",value:this.state.newPassword,onChange:this.handleInputChange}),i.a.createElement(xe.a,{color:"teal",fluid:!0,size:"large"},"Alterar Senha"),i.a.createElement(ye.a,{error:!0,header:"Error ao realizar login",content:this.state.error}))))))}}]),a}(i.a.Component),Ae=(t(674),t(70)),Me=t(375),Te=t(82),Le=t(377),qe=t(374),ze=t(78),Ue=t(15),Ve=t(32),$e=function(){return Object(ze.split)((function(e){var a=e.query,t=Object(Ue.j)(a),n=t.kind,i=t.operation;return"OperationDefinition"===n&&"subscription"===i}),new qe.SubscriptionClient("".concat(je.wsUrl,"/subscriptions"),{reconnect:!0,connectionParams:{authToken:localStorage.getItem("AuthToken")||""}}),Object(Me.createUploadLink)({uri:"".concat(je.appUrl,"/graphql"),credentials:"include",headers:{authorization:localStorage.getItem("AuthToken")||""}}))},Be=function(e){var a=e.children;return i.a.createElement(Ve.a,{client:new Te.a({link:$e(),cache:new Le.a})},a)},Ge=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).state={isAuthenticated:!1},t.componentCallback=t.componentCallback.bind(Object(d.a)(t)),t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"componentCallback",value:function(e){this.setState({isAuthenticated:H()})}},{key:"componentDidMount",value:function(){this.setState({isAuthenticated:H(),loading:!0})}},{key:"componentWillUpdate",value:function(){var e=this,a=setInterval((function(){console.log(a),clearInterval(a),e.state.loading&&e.setState({loading:!1})}),1e3)}},{key:"render",value:function(){var e;if(this.state.loading)return i.a.createElement(T,null);var a=H(),t="ADMIN"===(null===a||void 0===a?void 0:null===(e=a.schema)||void 0===e?void 0:e.name)?fe:le;return i.a.createElement(Ae.a,{style:{height:"inherit"}},this.state.isAuthenticated&&i.a.createElement("div",{className:"ui pointing secondary menu"},i.a.createElement(Ae.b,{className:"item",exact:!0,to:"/"},"Home"),i.a.createElement(Ae.b,{className:"item",to:"/teste"},"Testes"),i.a.createElement(Ae.b,{className:"item",to:"/passwordchange"},"Alterar senha"),i.a.createElement(Ae.b,{className:"item",to:"/logoff"},"Logoff")),i.a.createElement(Be,null,i.a.createElement(x.d,null,i.a.createElement(x.b,{path:"/login"},i.a.createElement(ke,{componentCallback:this.componentCallback})),i.a.createElement(S,{path:"/logoff",component:Ne,componentCallback:this.componentCallback}),i.a.createElement(S,{path:"/teste",component:Pe}),i.a.createElement(S,{path:"/passwordchange",component:Re}),i.a.createElement(S,{path:"/",component:t}))))}}]),a}(i.a.Component);r.a.render(i.a.createElement(Ge,null),document.getElementById("root"))},97:function(e){e.exports=JSON.parse('{"appUrl":"https://laudos.herokuapp.com","wsUrl":"wss://laudos.herokuapp.com"}')}},[[385,1,2]]]);
//# sourceMappingURL=main.b172d2e5.chunk.js.map