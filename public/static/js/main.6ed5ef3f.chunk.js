(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{278:function(e,t,a){e.exports=a(464)},288:function(e,t,a){},289:function(e,t,a){},290:function(e,t,a){},451:function(e,t,a){},452:function(e,t,a){},464:function(e,t,a){"use strict";a.r(t);a(279);var n=a(0),i=a.n(n),l=a(76),r=a.n(l),s=a(26),o=a(27),c=a(28),u=a(29),m=a(20),d=a(30),h=a(235),p=a(33),b=a(267),f=a(125),v=a(84),E=a.n(v),g=a(473);function O(){var e=Object(f.a)(["\n    query listarExames{\n        listarExames{\n            id,\n            protocolo,\n            dataExame,\n            nome\n        }\n    }\n"]);return O=function(){return e},e}var j=E()(O()),k=function(e){var t=e.children;return i.a.createElement(g.a,{query:j},t)},C=a(478),x=a(475),y=a(480),N=(a(288),a(133)),H=(a(289),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).dragHandler=a.dragHandler.bind(Object(m.a)(a)),a.handleFile=a.handleFile.bind(Object(m.a)(a)),a.state={filename:"",isOver:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"dragHandler",value:function(e){if(e.preventDefault(),e.stopPropagation(),console.log(e.type),"drop"===e.type||"dragleave"===e.type?this.setState({isOver:!1}):this.setState({isOver:!0}),"drop"===e.type&&1===e.dataTransfer.items.length){var t=e.dataTransfer.files[0];t&&this.updateFile(t)}}},{key:"handleFile",value:function(e){var t=e.target,a=(t.validity,Object(N.a)(t.files,1)[0]);a&&this.updateFile(a)}},{key:"updateFile",value:function(e){this.setState({filename:e.name}),this.props.fileChanged&&this.props.fileChanged(e)}},{key:"render",value:function(){return i.a.createElement("div",{className:this.state.isOver?"upload-box has-advanced-upload is-dragover":"upload-box has-advanced-upload",onDrag:this.dragHandler,onDragStart:this.dragHandler,onDragEnd:this.dragHandler,onDragOver:this.dragHandler,onDragEnter:this.dragHandler,onDragLeave:this.dragHandler,onDrop:this.dragHandler},i.a.createElement("i",{"aria-hidden":"true",className:"huge upload icon"}),i.a.createElement("div",null,i.a.createElement("input",{id:"file",type:"file",multiple:!1,onChange:this.handleFile}),i.a.createElement("label",{htmlFor:"file"},this.state.filename?this.state.filename:i.a.createElement("div",null,i.a.createElement("strong",null,"Selecione um arquivo"),i.a.createElement("span",null," ou solte o aqui")))))}}]),t}(i.a.Component)),I=a(97),S=E()("\n    mutation salvarExame($exame: ExameInput!){\n        salvarExame(exame: $exame){\n            id,\n            protocolo,\n            nome,\n            dataExame\n        }\n    }\n"),w=function(e){var t=e.children,a=Object(I.a)(S),n=Object(N.a)(a,2);return t(n[0],n[1])},F=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleFile=a.handleFile.bind(Object(m.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(m.a)(a)),a.submitHandle=a.submitHandle.bind(Object(m.a)(a)),a.state={nome:"",protocolo:"",dataExame:"",possuiMarcapasso:!1,observacoes:"",exameFile:null},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleFile",value:function(e){var t=this;if(FileReader&&e){var a=new FileReader;a.onloadend=function(){t.setState({exameFile:e})},a&&a.readAsDataURL(e)}}},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(p.a)({},n,a))}},{key:"submitHandle",value:function(e){var t=this;e.preventDefault(),this.props.mutation({variables:{exame:{exameFile:this.state.exameFile,protocolo:this.state.protocolo,dataExame:this.state.dataExame,nome:this.state.nome,possuiMarcapasso:this.state.possuiMarcapasso,observacoes:this.state.observacoes}}}).then((function(e){t.props.submitHandle&&t.props.submitHandle(e.data.salvarExame)}))}},{key:"render",value:function(){var e;return i.a.createElement("form",{className:"ui form",onSubmit:this.submitHandle},i.a.createElement("div",{className:"field"},i.a.createElement(H,{fileChanged:this.handleFile})),i.a.createElement("div",{className:"fields"},i.a.createElement("div",{className:"inline fluid field"},i.a.createElement("label",null,"Protocolo:"),i.a.createElement("input",{type:"text",name:"protocolo",value:this.state.protocolo,onChange:this.handleInputChange})),i.a.createElement("div",{className:"inline field"},i.a.createElement("label",null,"Data Exame"),i.a.createElement("input",{name:"dataExame",type:"date",value:this.state.dataExame,onChange:this.handleInputChange}))),i.a.createElement("div",{className:"field"},i.a.createElement("label",null,"Nome"),i.a.createElement("input",{className:"ui input",type:"text",name:"nome",value:this.state.nome,onChange:this.handleInputChange})),i.a.createElement("h3",{className:"ui dividing header"},"Informa\xe7\xf5es Opcionais"),i.a.createElement("div",{className:"field"},i.a.createElement("div",{className:"ui toggle checkbox"},i.a.createElement("input",{type:"checkbox",tabIndex:"0",value:this.state.possuiMarcapasso,onChange:this.handleInputChange}),i.a.createElement("label",null,"Possui Marca-passo?"))),i.a.createElement("div",{className:"field"},i.a.createElement("label",null,"Outras Observa\xe7\xf5es:"),i.a.createElement("textarea",(e={id:"info",name:"info",rows:"5"},Object(p.a)(e,"name","observacoes"),Object(p.a)(e,"value",this.state.observacoes),Object(p.a)(e,"onChange",this.handleInputChange),e))),i.a.createElement("div",{className:"field"},i.a.createElement("input",{type:"submit",className:"ui fluid green button",value:"Cadastrar"})))}}]),t}(i.a.Component),L=function(e){var t=e.submitHandle;return i.a.createElement(w,null,(function(e,a){var n=Object.assign({},a);return i.a.createElement(F,Object.assign({submitHandle:t,mutation:e},n))}))};a(290);function D(){var e=Object(f.a)(["\n    subscription onLaudoSalvo($id: ID){\n        laudoSalvo(id: $id){\n            id,\n            nome,\n            protocolo,\n            dataExame\n        }\n    }\n"]);return D=function(){return e},e}var T=E()(D()),M=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).buttonClickHandler=a.buttonClickHandler.bind(Object(m.a)(a)),a.modalCloseHandler=a.modalCloseHandler.bind(Object(m.a)(a)),a.modoExibicao=a.modoExibicao.bind(Object(m.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(m.a)(a)),a.filtrar=a.filtrar.bind(Object(m.a)(a)),a.submitHandle=a.submitHandle.bind(Object(m.a)(a)),a.state={isOpen:!1,exibicaoTabela:!0,filter:""},a.props.subscribeToMore({document:T,variables:{id:1},updateQuery:function(e,t){var a=t.subscriptionData;if(!a.data)return e;var n=a.data.laudoSalvo;return e.listarExames.find((function(e){return e.id==n.id}))?e:Object.assign({},e,{listarExames:Object.assign([],e.listarExames,[].concat(Object(b.a)(e.listarExames),[n]))})}}),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"buttonClickHandler",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"modalCloseHandler",value:function(){this.setState({isOpen:!1})}},{key:"modoExibicao",value:function(e){this.setState({exibicaoTabela:e})}},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(p.a)({},n,a))}},{key:"filtrar",value:function(e){return e.protocolo.match(this.state.filter)||e.nome.match(this.state.filter)}},{key:"submitHandle",value:function(e){this.setState({isOpen:!1})}},{key:"render",value:function(){var e,t=this;return this.props.loading?i.a.createElement("div",null,"Loading..."):this.props.error?i.a.createElement("div",null,"Erro..."):(this.resultList=this.props.data.listarExames,this.state.filter&&(this.resultList=this.resultList.filter(this.filtrar)),e=this.state.exibicaoTabela?i.a.createElement("div",{className:"ui doubling four stackable tiny cards"},this.resultList.map((function(e){return i.a.createElement("div",{key:e.id,className:"ui yellow card"},i.a.createElement("div",{className:"content"},i.a.createElement("div",{className:"header"},e.protocolo," - ",e.nome),i.a.createElement("div",{className:"meta"},i.a.createElement("div",{className:"ui ribbon label"},e.dataExame?e.dataExame:(new Date).toISOString().substr(0,10)+" "+(new Date).toISOString().substr(11,5))),i.a.createElement("div",{className:"description bottom"},i.a.createElement("a",{href:"https://laudos.herokuapp.com/download?id="+e.id+"&download=exame"},"Baixar Laudo"))),i.a.createElement("div",{className:"extra content"},i.a.createElement("button",{className:"ui primary small button btn-default"},"Remover"),i.a.createElement("button",{className:"ui small button btn-default"},"Remover")))}))):i.a.createElement("div",{role:"list",className:"ui animated huge divided relaxed list"},this.resultList.map((function(e){return i.a.createElement("div",{key:e.id,role:"listitem",className:"item"},i.a.createElement("i",{"aria-hidden":"true",className:"chart bar icon large middle aligned"}),i.a.createElement("div",{className:"content"},i.a.createElement("a",{className:"header"},e.protocolo," - ",e.nome),i.a.createElement("a",{className:"description"},"Teste"),i.a.createElement("button",{className:"ui small button btn-default"},"Remover")))}))),i.a.createElement("div",null,i.a.createElement("div",{className:"ui menu"},i.a.createElement("a",{className:"item",onClick:this.buttonClickHandler},i.a.createElement("i",{"aria-hidden":"true",className:"add icon"}),"Novo Exame"),i.a.createElement("div",{className:"right menu"},i.a.createElement(C.a.Item,{active:!this.state.exibicaoTabela,onClick:function(){return t.modoExibicao(!1)}},i.a.createElement("i",{"aria-hidden":"true",className:"icon list"})),i.a.createElement(C.a.Item,{active:this.state.exibicaoTabela,onClick:function(){return t.modoExibicao(!0)}},i.a.createElement("i",{"aria-hidden":"true",className:"icon th"})),i.a.createElement("div",{className:"item"},i.a.createElement("div",{className:"ui icon input"},i.a.createElement("input",{type:"text",placeholder:"Filtro",name:"filter",value:this.state.filter,onChange:this.handleInputChange}),i.a.createElement("i",{"aria-hidden":"true",className:"search icon"}))))),i.a.createElement("div",{className:"ui segment"},i.a.createElement("div",null,"Total de Registros: ",this.props.data.listarExames.length),i.a.createElement("div",{className:"tabelaContainer"},e)),i.a.createElement(x.a,{onClose:this.modalCloseHandler,open:this.state.isOpen},i.a.createElement(y.a,{icon:"upload",content:"Cadastrar novo exame"}),i.a.createElement(x.a.Content,null,i.a.createElement(L,{submitHandle:this.submitHandle})))))}}]),t}(i.a.Component),R=function(){return i.a.createElement(k,null,(function(e){var t=Object.assign({},e);return i.a.createElement(M,t)}))},q=a(481),P=a(474),A=a(482),$=a(477),U=a(484),z=a(476),B=a(66),J=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=a.handleSubmit.bind(Object(m.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(m.a)(a)),a.state={error:!0,animation:"fade up",duration:800,userName:"",password:"",isLogged:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),fetch("https://laudos.herokuapp.com/login",{method:"post",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"userName=".concat(this.state.userName,"&password=").concat(this.state.password)}).then((function(e){return e.json()})).then((function(e){document.cookie="signedin=true",t.setState({isLogged:!0}),t.props.componentCallback(!0)}))}},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(p.a)({},n,a))}},{key:"render",value:function(){return this.state.isLogged?i.a.createElement(B.a,{to:"/"}):i.a.createElement(q.a,{textAlign:"center",verticalAlign:"middle",style:{height:"100vh"}},i.a.createElement(q.a.Column,{style:{maxWidth:450}},i.a.createElement(P.a,{error:this.state.error,size:"large",onSubmit:this.handleSubmit},i.a.createElement(A.a,{stacked:!0},i.a.createElement(P.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"E-mail address",name:"userName",value:this.state.userName,onChange:this.handleInputChange}),i.a.createElement(P.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleInputChange}),i.a.createElement($.a,{color:"teal",fluid:!0,size:"large"},"Login"))),i.a.createElement(U.a.Group,{animation:this.state.animation,duration:this.state.duration},this.props.error&&this.props.error.graphQLErrors.map((function(e,t){var a=e.message;return i.a.createElement(z.a,{error:!0,header:"Action Forbidden",content:a})})))))}}]),t}(i.a.Component),Q=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://laudos.herokuapp.com/logoff",{method:"post",credentials:"include"}).then((function(e){return e.json()})).then((function(t){document.cookie="signedin=false",e.props.componentCallback(!1)}))}},{key:"render",value:function(){return i.a.createElement(B.a,{to:"/login"})}}]),t}(i.a.Component),G=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={isOpen:!1},e.buttonClickHandle=e.buttonClickHandle.bind(Object(m.a)(e)),e}return Object(d.a)(t,e),Object(o.a)(t,[{key:"buttonClickHandle",value:function(){console.log(this.state.isOpen),this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return i.a.createElement("div",null)}}]),t}(i.a.Component),W=a(262),K=a.n(W),V=(a(451),i.a.Component,a(452),a(86)),X=function(){return"true"===K.a.get("signedin")},Y=function(e){var t=e.component,a=e.componentCallback,n=Object(h.a)(e,["component","componentCallback"]);return i.a.createElement(B.b,Object.assign({},n,{render:function(e){return X()?i.a.createElement(t,Object.assign({},e,{componentCallback:a})):i.a.createElement(B.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Z=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={isLoggedIn:X()},a.componentCallback=a.componentCallback.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentCallback",value:function(e){this.setState({isLoggedIn:e})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(V.a,null,this.state.isLoggedIn&&i.a.createElement("div",{className:"ui pointing secondary menu"},i.a.createElement(V.b,{className:"item",exact:!0,to:"/"},"Home"),i.a.createElement(V.b,{className:"item",to:"/logoff"},"Logoff")),i.a.createElement(B.d,null,i.a.createElement(B.b,{path:"/login"},i.a.createElement(J,{componentCallback:this.componentCallback})),i.a.createElement(Y,{path:"/logoff",component:Q,componentCallback:this.componentCallback}),i.a.createElement(Y,{path:"/",component:R}))),i.a.createElement(G,null))}}]),t}(n.Component),_=a(264),ee=a(67),te=a(266),ae=a(24),ne=a(263),ie=a(63),le=a(11),re=Object(_.createUploadLink)({uri:"https://laudos.herokuapp.com/graphql",credentials:"include"}),se=new ne.SubscriptionClient("wss://laudos.herokuapp.com/subscriptions",{reconnect:!0}),oe=Object(ie.split)((function(e){var t=e.query,a=Object(le.j)(t),n=a.kind,i=a.operation;return"OperationDefinition"==n&&"subscription"==i}),se,re),ce=new ee.a({link:oe,cache:new te.a});r.a.render(i.a.createElement((function(){return i.a.createElement(ae.a,{client:ce},i.a.createElement(Z,null))}),null),document.getElementById("root"))}},[[278,1,2]]]);
//# sourceMappingURL=main.6ed5ef3f.chunk.js.map