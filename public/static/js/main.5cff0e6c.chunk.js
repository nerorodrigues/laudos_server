(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{294:function(e,t,n){e.exports=n(531)},303:function(e,t){},305:function(e,t){},341:function(e,t){},342:function(e,t){},519:function(e,t,n){},531:function(e,t,n){"use strict";n.r(t);n(295);var a=n(0),r=n.n(a),o=n(73),c=n.n(o),i=n(59),l=n(60),u=n(61),s=n(62),h=n(37),p=n(63),m=n(46),d=n(548),b=n(551),f=n(545),g=n(550),E=n(547),k=n(546),w=n(66),C=n(259),j=n.n(C),v=Object({NODE_ENV:"production",PUBLIC_URL:""}).PUBLIC_KEY||"-----BEGIN PUBLIC KEY-----\nMFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBALns1DW2lVs/Cjk9nVxBzG8Gn0QIF8wH\n1LotLwuOk+lgVXZiXzkbMXxDzj3rEP0aVY0ATtqWxWcjurJXwqViLF0CAwEAAQ==\n-----END PUBLIC KEY-----",O={algorithm:"RS256",issuer:"laudos"};function S(){var e=localStorage.getItem("AuthToken");if(!e)return!1;try{return j.a.verify(e,v,O)}catch(t){return e&&localStorage.removeItem("AuthToken"),!1}}var I=n(96),A=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(h.a)(n)),n.state={error:!1,duration:800,userName:"",password:"",isLogged:!1},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),fetch("".concat(I.appUrl,"/login"),{method:"post",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"userName=".concat(this.state.userName,"&password=").concat(this.state.password)}).then((function(e){if(200===e.status)return e.json();throw new Error(e.Message)}),(function(e){return t.setState({error:!0}),e})).then((function(e){t.setState({isLogged:!0}),localStorage.setItem("AuthToken",e.token),t.props.componentCallback(!0)})).catch((function(e){t.setState({error:!0})}))}},{key:"handleInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(m.a)({},a,n))}},{key:"render",value:function(){return S()||this.state.isLogged?r.a.createElement(w.a,{to:"/"}):r.a.createElement(d.a,{textAlign:"center",verticalAlign:"middle",style:{height:"100vh"}},r.a.createElement(d.a.Column,{style:{maxWidth:450}},r.a.createElement(b.a.Group,{animation:"fade up",duration:800},r.a.createElement(f.a,{error:this.state.error,size:"large",onSubmit:this.handleSubmit},r.a.createElement(g.a,null,r.a.createElement(f.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"E-mail address",name:"userName",value:this.state.userName,onChange:this.handleInputChange}),r.a.createElement(f.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",required:!0,placeholder:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleInputChange}),r.a.createElement(E.a,{color:"teal",fluid:!0,size:"large"},"Login"),r.a.createElement(k.a,{error:!0,header:"Error ao realizar login",content:this.state.error}))))))}}]),t}(r.a.Component),y=n(278),L=function(e){var t=e.component,n=e.componentCallback,a=Object(y.a)(e,["component","componentCallback"]);return r.a.createElement(w.b,Object.assign({},a,{render:function(e){return S()?r.a.createElement(t,Object.assign({},e,{componentCallback:n})):r.a.createElement(w.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},N=(n(519),n(122)),U=n(281),B=n(283),x=n(285),D=n(279),P=n(65),T=n(10),z=n(544),q=function(){return Object(P.split)((function(e){var t=e.query,n=Object(T.j)(t),a=n.kind,r=n.operation;return"OperationDefinition"===a&&"subscription"===r}),new D.SubscriptionClient("".concat(I.wsUrl,"/subscriptions"),{reconnect:!0,connectionParams:{authToken:localStorage.getItem("AuthToken")||""}}),Object(U.createUploadLink)({uri:"".concat(I.appUrl,"/graphql"),credentials:"include",headers:{authorization:localStorage.getItem("AuthToken")||""}}))},J=function(e){var t=e.children;return r.a.createElement(z.a,{client:new B.a({link:q(),cache:new x.a})},t)},V=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).state={isAuthenticated:!1},n.componentCallback=n.componentCallback.bind(Object(h.a)(n)),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentCallback",value:function(e){this.setState({isAuthenticated:S()})}},{key:"componentDidMount",value:function(){this.setState({isAuthenticated:S()})}},{key:"render",value:function(){return r.a.createElement(N.a,null,r.a.createElement(J,null,r.a.createElement(w.d,null,r.a.createElement(w.b,{path:"/login"},r.a.createElement(A,{componentCallback:this.componentCallback})),r.a.createElement(L,{path:"/"},r.a.createElement("div",null,"Nero")))))}}]),t}(r.a.Component);c.a.render(r.a.createElement(V,null),document.getElementById("root"))},96:function(e){e.exports=JSON.parse('{"appUrl":"https://laudos.herokuapp.com/graphql","wsUrl":"wss://laudos.herokuapp.com"}')}},[[294,1,2]]]);
//# sourceMappingURL=main.5cff0e6c.chunk.js.map