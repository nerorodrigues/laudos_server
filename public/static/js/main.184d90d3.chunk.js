(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{217:function(e,a,t){e.exports=t(358)},344:function(e,a,t){},358:function(e,a,t){"use strict";t.r(a);t(218);var n=t(0),l=t.n(n),i=t(63),r=t.n(i),c=t(26),o=t(27),s=t(28),u=t(29),m=t(24),d=t(30),h=t(181),p=t(101),b=t(61),E=t.n(b),v=t(369);function f(){var e=Object(p.a)(["\n    query listarExames{\n        listarExames{\n            id,\n            protocolo,\n            dataExame,\n            nome\n        }\n    }\n"]);return f=function(){return e},e}var g=E()(f()),O=function(e){var a=e.children;return l.a.createElement(v.a,{query:g},a)},j=function(e){function a(e){return Object(c.a)(this,a),Object(s.a)(this,Object(u.a)(a).call(this,e))}return Object(d.a)(a,e),Object(o.a)(a,[{key:"editHandler",value:function(e){alert(e)}},{key:"render",value:function(){return this.props.loading?l.a.createElement("div",null,"Loading..."):this.props.error?l.a.createElement("div",null,"Erro..."):l.a.createElement("div",null,l.a.createElement("div",null,"Total de Registros: ",this.props.data.listarExames.length),l.a.createElement("div",{className:"ui doubling five stackable tiny cards"},this.props.data.listarExames.map((function(e){return l.a.createElement("div",{key:e.id,className:"ui yellow card"},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"header"},e.protocolo," - ",e.nome),l.a.createElement("div",{className:"meta"},l.a.createElement("div",{className:"ui ribbon label"},e.dataExame?e.dataExame:(new Date).toISOString().substr(0,10)+" "+(new Date).toISOString().substr(11,5))),l.a.createElement("div",{className:"description"},l.a.createElement("a",{href:"https://laudos.herokuapp.com/download?id="+e.id+"&download=exame"},"Baixar Laudo"))),l.a.createElement("div",{className:"extra content"},l.a.createElement("button",{className:"ui primary small button btn-default"},"Remover"),l.a.createElement("button",{className:"ui small button btn-default"},"Remover")))}))),l.a.createElement("div",{role:"list",className:"ui animated huge divided relaxed list"},this.props.data.listarExames.map((function(e){return l.a.createElement("div",{key:e.id,role:"listitem",className:"item"},l.a.createElement("i",{"aria-hidden":"true",className:"chart bar icon large middle aligned"}),l.a.createElement("div",{className:"content"},l.a.createElement("a",{className:"header"},e.protocolo," - ",e.nome),l.a.createElement("a",{className:"description"},"Teste"),l.a.createElement("button",{className:"ui small button btn-default"},"Remover")))}))))}}]),a}(l.a.Component),k=function(){return l.a.createElement(O,null,(function(e){var a=Object.assign({},e);return l.a.createElement(j,a)}))},N=t(31),C=t(375),x=t(371),y=t(377),I=t(373),w=t(378),S=t(372),L=t(73),F=t(64);function H(){var e=Object(p.a)(["\n    mutation signIn($userName: String!, $password: String!){\n        signIn(userName: $userName, password: $password){\n            token\n        }\n    }\n"]);return H=function(){return e},e}E()(H());var D=t(55),R=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(s.a)(this,Object(u.a)(a).call(this,e))).handleSubmit=t.handleSubmit.bind(Object(m.a)(t)),t.handleInputChange=t.handleInputChange.bind(Object(m.a)(t)),t.state={error:!0,animation:"fade up",duration:800,userName:"",password:"",isLogged:!1},t}return Object(d.a)(a,e),Object(o.a)(a,[{key:"handleSubmit",value:function(e){var a=this;e.preventDefault(),fetch("https://laudos.herokuapp.com/login",{method:"post",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"userName=".concat(this.state.userName,"&password=").concat(this.state.password)}).then((function(e){return e.json()})).then((function(e){document.cookie="signedin=true",a.setState({isLogged:!0}),a.props.componentCallback(!0)}))}},{key:"handleInputChange",value:function(e){var a=e.target,t="checkbox"===a.type?a.checked:a.value,n=a.name;this.setState(Object(N.a)({},n,t))}},{key:"render",value:function(){return this.state.isLogged?l.a.createElement(D.a,{to:"/"}):l.a.createElement(C.a,{textAlign:"center",verticalAlign:"middle",style:{height:"100vh"}},l.a.createElement(C.a.Column,{style:{maxWidth:450}},l.a.createElement(x.a,{error:this.state.error,size:"large",onSubmit:this.handleSubmit},l.a.createElement(y.a,{stacked:!0},l.a.createElement(x.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"E-mail address",name:"userName",value:this.state.userName,onChange:this.handleInputChange}),l.a.createElement(x.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleInputChange}),l.a.createElement(I.a,{color:"teal",fluid:!0,size:"large"},"Login"))),l.a.createElement(w.a.Group,{animation:this.state.animation,duration:this.state.duration},this.props.error&&this.props.error.graphQLErrors.map((function(e,a){var t=e.message;return l.a.createElement(S.a,{error:!0,header:"Action Forbidden",content:t})})))))}}]),a}(l.a.Component),M=function(e){function a(e){return Object(c.a)(this,a),Object(s.a)(this,Object(u.a)(a).call(this,e))}return Object(d.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:3000/logoff",{method:"post",credentials:"include"}).then((function(e){return e.json()})).then((function(a){document.cookie="signedin=false",e.props.componentCallback(!1)}))}},{key:"render",value:function(){return l.a.createElement(D.a,{to:"/login"})}}]),a}(l.a.Component),$=t(370),P=E()("\n    mutation salvarExame($exame: ExameInput!){\n        salvarExame(exame: $exame){\n            id,\n            protocolo,\n            nome,\n            dataExame\n        }\n    }\n"),q=function(e){var a=e.children,t=Object(F.a)(P),n=Object(L.a)(t,2);return a(n[0],n[1])},A=(t(344),function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(s.a)(this,Object(u.a)(a).call(this,e))).handleFile=t.handleFile.bind(Object(m.a)(t)),t.submitHandle=t.submitHandle.bind(Object(m.a)(t)),t.handleInputChange=t.handleInputChange.bind(Object(m.a)(t)),t.state={nome:"Nero",protocolo:"123",dataExame:"",possuiMarcapasso:!1,observacoes:"",exameFile:null},t}return Object(d.a)(a,e),Object(o.a)(a,[{key:"handleFile",value:function(e){var a=this,t=e.target,n=t.validity,l=Object(L.a)(t.files,1)[0];if(FileReader){var i=new FileReader;i.onloadend=function(){a.setState({exameFile:l,valid:n.valid,imagePreview:i.result})},i.readAsDataURL(l)}}},{key:"handleInputChange",value:function(e){var a=e.target,t="checkbox"===a.type?a.checked:a.value,n=a.name;this.setState(Object(N.a)({},n,t))}},{key:"submitHandle",value:function(e){e.preventDefault(),this.props.mutation({variables:{exame:{exameFile:this.state.exameFile,protocolo:this.state.protocolo,dataExame:this.state.dataExame,nome:this.state.nome,possuiMarcapasso:this.state.possuiMarcapasso,observacoes:this.state.observacoes}}}).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e;return l.a.createElement($.a,null,l.a.createElement("div",{className:"ui center aligned middle aligned grid",style:{height:"90vh"}},l.a.createElement("div",{className:"column",style:{maxWidth:"60%",minWidth:700}},l.a.createElement("div",{className:"ui placeholder segment aligned"},l.a.createElement("form",{className:"ui form",onSubmit:this.submitHandle},l.a.createElement("div",{className:"field"},l.a.createElement("i",{"aria-hidden":"true",className:"upload huge icon"})),l.a.createElement("div",{className:"field upload"},l.a.createElement("input",{className:"ui input",type:"file",required:!0,onChange:this.handleFile})),l.a.createElement("div",{className:"fields"},l.a.createElement("div",{className:"inline fluid field"},l.a.createElement("label",null,"Protocolo:"),l.a.createElement("input",{type:"text",name:"protocolo",value:this.state.protocolo,onChange:this.handleInputChange})),l.a.createElement("div",{className:"inline field"},l.a.createElement("label",null,"Data Exame"),l.a.createElement("input",{name:"dataExame",type:"date",value:this.state.dataExame,onChange:this.handleInputChange}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",null,"Nome"),l.a.createElement("input",{className:"ui input",type:"text",name:"nome",value:this.state.nome,onChange:this.handleInputChange})),l.a.createElement("h3",{className:"ui dividing header"},"Informa\xe7\xf5es Opcionais"),l.a.createElement("div",{className:"field"},l.a.createElement("div",{className:"ui fitted toggle checkbox"},l.a.createElement("input",{type:"checkbox",readOnly:"",tabIndex:"0",name:"possuiMarcapasso",value:this.state.possuiMarcapasso,onChange:this.handleInputChange}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",null,"Outras Observa\xe7\xf5es:"),l.a.createElement("textarea",(e={id:"info",name:"info",rows:"5"},Object(N.a)(e,"name","observacoes"),Object(N.a)(e,"value",this.state.observacoes),Object(N.a)(e,"onChange",this.handleInputChange),e))),l.a.createElement("div",{className:"field"},l.a.createElement("input",{type:"submit",className:"ui fluid green button",value:"Cadastrar"})))))))}}]),a}(l.a.Component)),U=function(){return l.a.createElement(q,null,(function(e,a){var t=Object.assign({},a);return l.a.createElement(A,Object.assign({mutation:e},t))}))},T=function(e){function a(){var e;return Object(c.a)(this,a),(e=Object(s.a)(this,Object(u.a)(a).call(this))).state={isOpen:!1},e.buttonClickHandle=e.buttonClickHandle.bind(Object(m.a)(e)),e}return Object(d.a)(a,e),Object(o.a)(a,[{key:"buttonClickHandle",value:function(){console.log(this.state.isOpen),this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return l.a.createElement("div",null)}}]),a}(l.a.Component),W=t(204),z=t.n(W),B=t(72),J=t(374),G=function(){return"true"==z.a.get("signedin")},Q=function(e){var a=e.component,t=e.componentCallback,n=Object(h.a)(e,["component","componentCallback"]);return l.a.createElement(D.b,Object.assign({},n,{render:function(e){return G()?l.a.createElement(a,Object.assign({},e,{componentCallback:t})):l.a.createElement(D.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},K=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(s.a)(this,Object(u.a)(a).call(this,e))).state={isLoggedIn:G()},t.componentCallback=t.componentCallback.bind(Object(m.a)(t)),t}return Object(d.a)(a,e),Object(o.a)(a,[{key:"componentCallback",value:function(e){this.setState({isLoggedIn:e})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(B.a,null,this.state.isLoggedIn&&l.a.createElement(J.a,null,l.a.createElement(J.a.Item,null,l.a.createElement(B.b,{to:"/logoff"},"Logoff")),l.a.createElement(J.a.Item,null,l.a.createElement(B.b,{to:"/upload"},"Upload"))),l.a.createElement(D.d,null,l.a.createElement(D.b,{path:"/login"},l.a.createElement(R,{componentCallback:this.componentCallback})),l.a.createElement(Q,{path:"/logoff",component:M,componentCallback:this.componentCallback}),l.a.createElement(Q,{path:"/upload",component:U}),l.a.createElement(Q,{path:"/",component:k}))),l.a.createElement(T,null))}}]),a}(n.Component),V=t(206),X=t(56),Y=t(208),Z=t(19),_=Object(V.createUploadLink)({uri:"https://laudos.herokuapp.com/graphql",credentials:"include"}),ee=new X.a({link:_,cache:new Y.a});r.a.render(l.a.createElement((function(){return l.a.createElement(Z.a,{client:ee},l.a.createElement(K,null))}),null),document.getElementById("root"))}},[[217,1,2]]]);
//# sourceMappingURL=main.184d90d3.chunk.js.map