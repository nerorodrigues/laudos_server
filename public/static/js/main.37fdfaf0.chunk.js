(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{118:function(e){e.exports=JSON.parse('{"appUrl":"https://laudos.herokuapp.com/graphql","wsUrl":"wss://laudos.herokuapp.com"}')},367:function(e,a,t){e.exports=t(650)},377:function(e,a,t){},378:function(e,a,t){},379:function(e,a,t){},380:function(e,a,t){},537:function(e,a){},539:function(e,a){},575:function(e,a){},576:function(e,a){},639:function(e,a,t){},650:function(e,a,t){"use strict";t.r(a);t(368);var n=t(0),r=t.n(n),i=t(87),l=t.n(i),o=t(27),s=t(28),c=t(29),u=t(30),d=t(22),m=t(31),h=t(45),p=t(356),b=t(154),v=t(98),E=t.n(v),f=t(660);function g(){var e=Object(b.a)(["\n    query listarExames{\n        listarExames{\n            id,\n            protocolo,\n            dataExame,\n            nome,\n            dataCadastro,\n            exameUrl,\n            laudoUrl\n        }\n    }\n"]);return g=function(){return e},e}var O=E()(g()),C=function(e){var a=e.children;return r.a.createElement(f.a,{query:O},a)},j=t(665),x=t(662),k=t(667),y=t(163),N=(t(377),t(378),function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).dragHandler=t.dragHandler.bind(Object(d.a)(t)),t.onChangeHandler=t.onChangeHandler.bind(Object(d.a)(t)),t.state={filename:"",isOver:!1},t}return Object(m.a)(a,e),Object(s.a)(a,[{key:"dragHandler",value:function(e){if(e.preventDefault(),e.stopPropagation(),console.log(e.type),"drop"===e.type||"dragleave"===e.type?this.setState({isOver:!1}):this.setState({isOver:!0}),"drop"===e.type&&1===e.dataTransfer.items.length){var a=e.dataTransfer.files[0];a&&this.updateFile(a)}}},{key:"onChangeHandler",value:function(e){this.setState({filename:e.target.files[0].name}),this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){return r.a.createElement("div",{className:this.state.isOver?"upload-box has-advanced-upload is-dragover":"upload-box has-advanced-upload",onDrag:this.dragHandler,onDragStart:this.dragHandler,onDragEnd:this.dragHandler,onDragOver:this.dragHandler,onDragEnter:this.dragHandler,onDragLeave:this.dragHandler,onDrop:this.dragHandler},r.a.createElement("i",{"aria-hidden":"true",className:"huge upload icon"}),r.a.createElement("div",null,r.a.createElement("input",{id:"file",type:"file",multiple:!1,required:!0,onChange:this.onChangeHandler}),r.a.createElement("label",{htmlFor:"file"},this.state.filename?this.state.filename:r.a.createElement("div",null,r.a.createElement("strong",null,"Selecione um arquivo"),r.a.createElement("span",null," ou solte o aqui")))))}}]),a}(r.a.Component)),S=t(117),H=E()("\n    mutation salvarExame($exame: ExameInput!){\n        salvarExame(exame: $exame){\n            id,\n            protocolo,\n            nome,\n            dataExame\n        }\n    }\n"),I=function(e){var a=e.children,t=Object(S.a)(H),n=Object(y.a)(t,2);return a(n[0],n[1])},w=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).handleFile=t.handleFile.bind(Object(d.a)(t)),t.handleInputChange=t.handleInputChange.bind(Object(d.a)(t)),t.submitHandle=t.submitHandle.bind(Object(d.a)(t)),t.state={nome:"",protocolo:"",dataExame:"",possuiMarcapasso:!1,observacoes:"",exameFile:null,processando:!1},t}return Object(m.a)(a,e),Object(s.a)(a,[{key:"handleFile",value:function(e){var a=this,t=e.target,n=(t.validity,Object(y.a)(t.files,1)[0]);if(FileReader&&n){var r=new FileReader;r.onloadend=function(){a.setState({exameFile:n})},r&&r.readAsDataURL(n)}}},{key:"handleInputChange",value:function(e){var a=e.target,t="checkbox"===a.type?a.checked:a.value,n=a.name;this.setState(Object(h.a)({},n,t))}},{key:"submitHandle",value:function(e){var a=this;e.preventDefault(),this.setState({processando:!0}),this.props.mutation({variables:{exame:{exameFile:this.state.exameFile,protocolo:this.state.protocolo,dataExame:this.state.dataExame,nome:this.state.nome,possuiMarcapasso:this.state.possuiMarcapasso,observacoes:this.state.observacoes}}}).then((function(e){a.props.onSubmited&&a.props.onSubmited({status:"Sucesso",result:e.data.salvarExame,message:"Novo cadastro de exame para ".concat(a.state.nome," finalizado com sucesso.")})})).catch((function(e){a.props.onSubmited&&a.props.onSubmited({status:"Sucesso",result:e,message:"Ocorreu um erro ao realizar o cadastro do exame."})}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{className:"ui form dimmable",onSubmit:this.submitHandle},r.a.createElement("div",{className:"ui inverted dimmer ".concat(this.state.processando?"active":"")},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"ui text loader"},"Salvando Registro"))),r.a.createElement("div",{className:"field"},r.a.createElement(N,{onChange:this.handleFile})),r.a.createElement("div",{className:"fields"},r.a.createElement("div",{className:"inline fluid field"},r.a.createElement("label",null,"Protocolo:"),r.a.createElement("input",{type:"text",name:"protocolo",required:!0,value:this.state.protocolo,onChange:this.handleInputChange})),r.a.createElement("div",{className:"inline field"},r.a.createElement("label",null,"Data Exame"),r.a.createElement("input",{name:"dataExame",type:"date",required:!0,value:this.state.dataExame,onChange:this.handleInputChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Nome"),r.a.createElement("input",{className:"ui input",type:"text",required:!0,name:"nome",value:this.state.nome,onChange:this.handleInputChange})),r.a.createElement("h3",{className:"ui dividing header"},"Informa\xe7\xf5es Opcionais"),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"ui toggle checkbox"},r.a.createElement("input",{type:"checkbox",tabIndex:"0",value:this.state.possuiMarcapasso,onChange:this.handleInputChange}),r.a.createElement("label",null,"Possui Marca-passo?"))),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Outras Observa\xe7\xf5es:"),r.a.createElement("textarea",{id:"info",rows:"5",name:"observacoes",value:this.state.observacoes,onChange:this.handleInputChange})),r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"submit",className:"ui fluid green button",value:"Cadastrar"}))))}}]),a}(r.a.Component),F=function(e){var a=e.onSubmited;return r.a.createElement(I,null,(function(e,t){var n=Object.assign({},t);return r.a.createElement(w,Object.assign({onSubmited:a,mutation:e},n))}))};t(379);function D(){var e=Object(b.a)(["\n    subscription onLaudoSalvo($id: ID){\n        laudoSalvo(id: $id){\n            id,\n            nome,\n            protocolo,\n            dataExame\n            dataCadastro,\n            exameUrl,\n            laudoUrl\n        }\n    }\n"]);return D=function(){return e},e}var A=E()(D()),L=t(325),U=(t(380),function(e){function a(){return Object(o.a)(this,a),Object(c.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{key:this.props.data.id,className:"ui yellow card fade left"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"light label inline"},r.a.createElement("label",null,"Protocolo:"),r.a.createElement("div",null,this.props.data.protocolo)),r.a.createElement("div",{className:"label inline"},this.props.data.nome)),r.a.createElement("div",{className:"meta"},r.a.createElement("div",{className:"ui ribbon label"},"Cadastro Realizado em ".concat(this.props.data.dataCadastro))),r.a.createElement("div",{className:"description bottom"},this.props.laudoUrl?r.a.createElement("a",{href:this.props.laudoUrl},"Baixar Laudo"):r.a.createElement("a",{href:this.props.exameUrl},"Baixar Exame"))),r.a.createElement("div",{className:"extra content"},r.a.createElement("button",{className:"ui primary small button btn-default"},"Ver"),r.a.createElement("button",{className:"ui small button btn-default"},"Remover")))}}]),a}(r.a.Component)),z=function(e){function a(){return Object(o.a)(this,a),Object(c.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui doubling four stackable tiny cards"},r.a.createElement(L.a,{duration:500},this.props.data.map((function(e){return r.a.createElement(U,{key:e.id,data:e})}))))}}]),a}(r.a.Component),T=t(5),q=t.n(T),M=function(e,a){return e&&a},P=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).onClickHandler=t.onClickHandler.bind(Object(d.a)(t)),t.state={className:""},t}return Object(m.a)(a,e),Object(s.a)(a,[{key:"onClickHandler",value:function(e){this.props.onSelect&&this.props.data&&this.props.onSelect(this.props.data)}},{key:"render",value:function(){var e=this.props,a=e.active,t=e.className,n=q()("item",M(a,"active"),t);return r.a.createElement("div",{role:"listitem",className:n,onClick:this.onClickHandler},this.props.children)}}]),a}(r.a.Component),R=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).onSelectionChangeHandler=t.onSelectionChangeHandler.bind(Object(d.a)(t)),t.state={selectedValue:t.props.selectValue},t}return Object(m.a)(a,e),Object(s.a)(a,[{key:"onSelectionChangeHandler",value:function(e){this.setState({selectedValue:e.id}),this.props.onSelectionChanged&&this.props.onSelectionChanged(e)}},{key:"render",value:function(){var e=this,a=this.props,t=a.size,n=a.className,i=a.animated,l=a.divided,o=a.relaxed,s=a.selection,c=q()("ui",M(i,"animated"),M(l,"divided"),M(o,"relaxed"),M(s,"selection"),t,"list",n),u=this.props.children;return u=u.map((function(a){var t,n;return r.a.cloneElement(a,{active:null!==(t=a.props.data.id===(null===(n=e.state)||void 0===n?void 0:n.selectedValue))&&void 0!==t&&t,onSelect:e.onSelectionChangeHandler})})),r.a.createElement("div",null,r.a.createElement("div",{role:"list",className:c},u))}}]),a}(r.a.Component);R.Item=P;var B=R,V=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).buttonClickHandler=t.buttonClickHandler.bind(Object(d.a)(t)),t.cadastrarExameCloseHandler=t.cadastrarExameCloseHandler.bind(Object(d.a)(t)),t.modoExibicao=t.modoExibicao.bind(Object(d.a)(t)),t.handleInputChange=t.handleInputChange.bind(Object(d.a)(t)),t.filtrar=t.filtrar.bind(Object(d.a)(t)),t.submitHandle=t.submitHandle.bind(Object(d.a)(t)),t.cadastroFinalizadoHandler=t.cadastroFinalizadoHandler.bind(Object(d.a)(t)),t.state={isCadastrarExameOpen:!1,isCadastroFinalizadoModalOpen:!1,exibicaoTabela:!0,filter:"",cadastraExameResult:null},t.props.subscribeToMore({document:A,variables:{id:1},updateQuery:function(e,a){var t=a.subscriptionData;if(!t.data)return e;var n=t.data.laudoSalvo;return e.listarExames.find((function(e){return e.id===n.id}))?e:Object.assign({},e,{listarExames:Object.assign([],e.listarExames,[].concat(Object(p.a)(e.listarExames),[n]))})}}),t}return Object(m.a)(a,e),Object(s.a)(a,[{key:"buttonClickHandler",value:function(){this.setState({isCadastrarExameOpen:!this.state.isCadastrarExameOpen})}},{key:"cadastrarExameCloseHandler",value:function(){this.setState({isCadastrarExameOpen:!1})}},{key:"modoExibicao",value:function(e){this.setState({exibicaoTabela:e})}},{key:"handleInputChange",value:function(e){var a=e.target,t="checkbox"===a.type?a.checked:a.value,n=a.name;this.setState(Object(h.a)({},n,t))}},{key:"filtrar",value:function(e){return e.protocolo.match(this.state.filter)||e.nome.match(this.state.filter)}},{key:"submitHandle",value:function(e){this.setState({isCadastrarExameOpen:!1,isCadastroFinalizadoModalOpen:!0,cadastraExameResult:e})}},{key:"cadastroFinalizadoHandler",value:function(){this.setState({isCadastroFinalizadoModalOpen:!1})}},{key:"render",value:function(){var e,a,t,n=this;if(this.props.loading)return r.a.createElement("div",null,"Loading...");if(this.props.error)return r.a.createElement("div",null,"Erro...");var i=this.props.data.listarExames;return this.state.filter&&(i=this.resultList.filter(this.filtrar)),r.a.createElement("div",null,r.a.createElement("div",{className:"ui menu"},r.a.createElement("a",{className:"item",onClick:this.buttonClickHandler},r.a.createElement("i",{"aria-hidden":"true",className:"add icon"}),"Novo Exame"),r.a.createElement("div",{className:"right menu"},r.a.createElement(j.a.Item,{active:!this.state.exibicaoTabela,onClick:function(){return n.modoExibicao(!1)}},r.a.createElement("i",{"aria-hidden":"true",className:"icon list"})),r.a.createElement(j.a.Item,{active:this.state.exibicaoTabela,onClick:function(){return n.modoExibicao(!0)}},r.a.createElement("i",{"aria-hidden":"true",className:"icon th"})),r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"ui icon input"},r.a.createElement("input",{type:"text",placeholder:"Filtro",name:"filter",value:this.state.filter,onChange:this.handleInputChange}),r.a.createElement("i",{"aria-hidden":"true",className:"search icon"}))))),r.a.createElement("div",{className:"ui segment"},r.a.createElement("div",null,"Total de Registros: ",this.props.data.listarExames.length),r.a.createElement("div",{className:"tabelaContainer"},this.state.exibicaoTabela?r.a.createElement(z,{data:i}):r.a.createElement(B,{data:i}))),r.a.createElement(x.a,{onClose:this.cadastrarExameCloseHandler,open:this.state.isCadastrarExameOpen},r.a.createElement(k.a,{icon:"upload",content:"Cadastrar novo exame"}),r.a.createElement(x.a.Content,null,r.a.createElement(F,{onSubmited:this.submitHandle}))),r.a.createElement(x.a,{onClose:this.cadastroFinalizadoHandler,open:this.state.isCadastroFinalizadoModalOpen},r.a.createElement(k.a,{icon:"Sucesso"===(null===(e=this.state)||void 0===e?void 0:null===(a=e.cadastraExameResult)||void 0===a?void 0:a.status)?"green icon check":"red icon thumbs down"}),r.a.createElement(x.a.Content,null,r.a.createElement("div",null,null===(t=this.state.cadastraExameResult)||void 0===t?void 0:t.message))))}}]),a}(r.a.Component),J=function(){return r.a.createElement(C,null,(function(e){var a=Object.assign({},e);return r.a.createElement(V,a)}))},Q=t(668),Y=t(327),G=t(661),K=t(669),W=t(664),X=t(663),$=t(76),_=t(341),Z=t.n(_),ee=Object({NODE_ENV:"production",PUBLIC_URL:""}).PUBLIC_KEY||"-----BEGIN PUBLIC KEY-----\nMFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBALns1DW2lVs/Cjk9nVxBzG8Gn0QIF8wH\n1LotLwuOk+lgVXZiXzkbMXxDzj3rEP0aVY0ATtqWxWcjurJXwqViLF0CAwEAAQ==\n-----END PUBLIC KEY-----",ae={algorithm:"RS256",issuer:"laudos"};function te(){var e=localStorage.getItem("AuthToken");if(!e)return!1;try{return Z.a.verify(e,ee,ae)}catch(a){return e&&localStorage.removeItem("AuthToken"),!1}}var ne=t(118),re=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).handleSubmit=t.handleSubmit.bind(Object(d.a)(t)),t.handleInputChange=t.handleInputChange.bind(Object(d.a)(t)),t.state={error:!1,duration:800,userName:"",password:"",isLogged:!1},t}return Object(m.a)(a,e),Object(s.a)(a,[{key:"handleSubmit",value:function(e){var a=this;e.preventDefault(),fetch("".concat(ne.appUrl,"/auth"),{method:"post",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"userName=".concat(this.state.userName,"&password=").concat(this.state.password)}).then((function(e){if(200===e.status)return e.json();throw new Error(e.Message)}),(function(e){return a.setState({error:!0}),e})).then((function(e){a.setState({isLogged:!0}),localStorage.setItem("AuthToken",e.token),a.props.componentCallback(!0)})).catch((function(e){a.setState({error:!0})}))}},{key:"handleInputChange",value:function(e){var a=e.target,t="checkbox"===a.type?a.checked:a.value,n=a.name;this.setState(Object(h.a)({},n,t))}},{key:"render",value:function(){return te()||this.state.isLogged?r.a.createElement($.a,{to:"/"}):r.a.createElement(Q.a,{textAlign:"center",verticalAlign:"middle",style:{height:"100vh"}},r.a.createElement(Q.a.Column,{style:{maxWidth:450}},r.a.createElement(Y.a.Group,{animation:"fade up",duration:800},r.a.createElement(G.a,{error:this.state.error,size:"large",onSubmit:this.handleSubmit},r.a.createElement(K.a,null,r.a.createElement(G.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"E-mail address",name:"userName",value:this.state.userName,onChange:this.handleInputChange}),r.a.createElement(G.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",required:!0,placeholder:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleInputChange}),r.a.createElement(W.a,{color:"teal",fluid:!0,size:"large"},"Login"),r.a.createElement(X.a,{error:!0,header:"Error ao realizar login",content:this.state.error}))))))}}]),a}(r.a.Component),ie=t(352),le=function(e){var a=e.component,t=e.componentCallback,n=Object(ie.a)(e,["component","componentCallback"]);return r.a.createElement($.b,Object.assign({},n,{render:function(e){return te()?r.a.createElement(a,Object.assign({},e,{componentCallback:t})):r.a.createElement($.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},oe=(t(639),t(153)),se=t(354),ce=t(77),ue=t(357),de=t(353),me=t(73),he=t(11),pe=t(26),be=function(){return Object(me.split)((function(e){var a=e.query,t=Object(he.j)(a),n=t.kind,r=t.operation;return"OperationDefinition"===n&&"subscription"===r}),new de.SubscriptionClient("".concat(ne.wsUrl,"/subscriptions"),{reconnect:!0,connectionParams:{authToken:localStorage.getItem("AuthToken")||""}}),Object(se.createUploadLink)({uri:"".concat(ne.appUrl,"/graphql"),credentials:"include",headers:{authorization:localStorage.getItem("AuthToken")||""}}))},ve=function(e){var a=e.children;return r.a.createElement(pe.a,{client:new ce.a({link:be(),cache:new ue.a})},a)},Ee=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).state={isAuthenticated:!1},t.componentCallback=t.componentCallback.bind(Object(d.a)(t)),t}return Object(m.a)(a,e),Object(s.a)(a,[{key:"componentCallback",value:function(e){this.setState({isAuthenticated:te()})}},{key:"componentDidMount",value:function(){this.setState({isAuthenticated:te()})}},{key:"render",value:function(){return r.a.createElement(oe.a,null,r.a.createElement(ve,null,r.a.createElement($.d,null,r.a.createElement($.b,{path:"/login"},r.a.createElement(re,{componentCallback:this.componentCallback})),r.a.createElement(le,{path:"/",component:J}))))}}]),a}(r.a.Component);l.a.render(r.a.createElement(Ee,null),document.getElementById("root"))}},[[367,1,2]]]);
//# sourceMappingURL=main.37fdfaf0.chunk.js.map