(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{292:function(e,t,n){e.exports=n(529)},301:function(e,t){},303:function(e,t){},339:function(e,t){},340:function(e,t){},517:function(e,t,n){},529:function(e,t,n){"use strict";n.r(t);n(293);var a=n(0),r=n.n(a),o=n(73),c=n.n(o),i=n(42),l=n(43),s=n(44),u=n(45),h=n(32),m=n(48),d=n(51),p=n(546),b=n(549),f=n(543),g=n(548),E=n(545),k=n(544),O=n(65),v=n(258),j=n.n(v),C=Object({NODE_ENV:"production",PUBLIC_URL:""}).PUBLIC_KEY||"-----BEGIN PUBLIC KEY-----\nMFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBALns1DW2lVs/Cjk9nVxBzG8Gn0QIF8wH\n1LotLwuOk+lgVXZiXzkbMXxDzj3rEP0aVY0ATtqWxWcjurJXwqViLF0CAwEAAQ==\n-----END PUBLIC KEY-----",w={algorithm:"RS256",issuer:"laudos"};function A(){var e=localStorage.getItem("AuthToken");if(!e)return!1;try{return j.a.verify(e,C,w)}catch(t){return e&&localStorage.removeItem("AuthToken"),!1}}var S=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(h.a)(n)),n.state={error:!1,duration:800,userName:"",password:"",isLogged:!1},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),fetch("http://localhost:3000/login",{method:"post",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"userName=".concat(this.state.userName,"&password=").concat(this.state.password)}).then((function(e){if(200===e.status)return e.json();throw new Error(e.Message)}),(function(e){return t.setState({error:!0}),e})).then((function(e){t.setState({isLogged:!0}),localStorage.setItem("AuthToken",e.token),t.props.componentCallback(!0)})).catch((function(e){t.setState({error:!0})}))}},{key:"handleInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(d.a)({},a,n))}},{key:"render",value:function(){return A()||this.state.isLogged?r.a.createElement(O.a,{to:"/"}):r.a.createElement(p.a,{textAlign:"center",verticalAlign:"middle",style:{height:"100vh"}},r.a.createElement(p.a.Column,{style:{maxWidth:450}},r.a.createElement(b.a.Group,{animation:"fade up",duration:800},r.a.createElement(f.a,{error:this.state.error,size:"large",onSubmit:this.handleSubmit},r.a.createElement(g.a,null,r.a.createElement(f.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"E-mail address",name:"userName",value:this.state.userName,onChange:this.handleInputChange}),r.a.createElement(f.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",required:!0,placeholder:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleInputChange}),r.a.createElement(E.a,{color:"teal",fluid:!0,size:"large"},"Login"),r.a.createElement(k.a,{error:!0,header:"Error ao realizar login",content:this.state.error}))))))}}]),t}(r.a.Component),I=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state={isOpen:!1},e.buttonClickHandle=e.buttonClickHandle.bind(Object(h.a)(e)),e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"buttonClickHandle",value:function(){console.log(this.state.isOpen),this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return r.a.createElement("div",null)}}]),t}(r.a.Component),y=(n(517),n(67)),N=n(279),L=n(281),x=n(283),B=n(277),P=n(64),D=n(10),T=n(542),z=function(){return Object(P.split)((function(e){var t=e.query,n=Object(D.j)(t),a=n.kind,r=n.operation;return"OperationDefinition"===a&&"subscription"===r}),new B.SubscriptionClient("ws://localhost:3000/subscriptions",{reconnect:!0,connectionParams:{authToken:localStorage.getItem("AuthToken")||""}}),Object(N.createUploadLink)({uri:"http://localhost:3000/graphql",credentials:"include",headers:{authorization:localStorage.getItem("AuthToken")||""}}))},U=function(e){var t=e.children;return r.a.createElement(T.a,{client:new L.a({link:z(),cache:new x.a})},t)},V=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={isAuthenticated:!1},n.componentCallback=n.componentCallback.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentCallback",value:function(e){this.setState({isAuthenticated:A()})}},{key:"componentDidMount",value:function(){this.setState({isAuthenticated:A()})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y.a,null,this.state.isAuthenticated&&r.a.createElement("div",{className:"ui pointing secondary menu"},r.a.createElement(y.b,{className:"item",exact:!0,to:"/"},"Home"),r.a.createElement(y.b,{className:"item",exact:!0,to:"/porcliente"},"Por Cliente"),r.a.createElement(y.b,{className:"item",to:"/teste"},"Testes"),r.a.createElement(y.b,{className:"item",to:"/passwordchange"},"Alterar senha"),r.a.createElement(y.b,{className:"item",to:"/logoff"},"Logoff")),r.a.createElement(U,null,r.a.createElement(O.d,null,r.a.createElement(O.b,{path:"/login"},r.a.createElement(S,{componentCallback:this.componentCallback}))))),r.a.createElement(I,null))}}]),t}(a.Component);c.a.render(r.a.createElement(V,null),document.getElementById("root"))}},[[292,1,2]]]);
//# sourceMappingURL=main.75102ed1.chunk.js.map