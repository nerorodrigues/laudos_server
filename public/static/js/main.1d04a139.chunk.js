(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{272:function(e,t,a){e.exports=a(449)},282:function(e,t,a){},283:function(e,t,a){},284:function(e,t,a){},445:function(e,t,a){},446:function(e,t,a){},449:function(e,t,a){"use strict";a.r(t);a(273);var n=a(0),l=a.n(n),i=a(73),r=a.n(i),c=a(22),o=a(23),s=a(24),u=a(25),m=a(19),d=a(26),h=a(227),p=a(30),b=a(228),f=a(229),E=a.n(f),v=a(460);function g(){var e=Object(b.a)(["\n    query listarExames{\n        listarExames{\n            id,\n            protocolo,\n            dataExame,\n            nome\n        }\n    }\n"]);return g=function(){return e},e}var O=E()(g()),C=function(e){var t=e.children;return l.a.createElement(v.a,{query:O},t)},k=a(465),j=a(462),N=a(467),y=(a(282),a(262)),x=(a(283),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).dragHandler=a.dragHandler.bind(Object(m.a)(a)),a.handleFile=a.handleFile.bind(Object(m.a)(a)),a.state={filename:"",isOver:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"dragHandler",value:function(e){if(e.preventDefault(),e.stopPropagation(),console.log(e.type),"drop"===e.type||"dragleave"===e.type?this.setState({isOver:!1}):this.setState({isOver:!0}),"drop"===e.type&&1===e.dataTransfer.items.length){var t=e.dataTransfer.files[0];t&&this.updateFile(t)}}},{key:"handleFile",value:function(e){var t=e.target,a=(t.validity,Object(y.a)(t.files,1)[0]);a&&this.updateFile(a)}},{key:"updateFile",value:function(e){this.setState({filename:e.name}),this.props.fileChanged&&this.props.fileChanged(e)}},{key:"render",value:function(){return l.a.createElement("div",{className:this.state.isOver?"upload-box has-advanced-upload is-dragover":"upload-box has-advanced-upload",onDrag:this.dragHandler,onDragStart:this.dragHandler,onDragEnd:this.dragHandler,onDragOver:this.dragHandler,onDragEnter:this.dragHandler,onDragLeave:this.dragHandler,onDrop:this.dragHandler},l.a.createElement("i",{"aria-hidden":"true",className:"huge upload icon"}),l.a.createElement("div",null,l.a.createElement("input",{id:"file",type:"file",multiple:!1,onChange:this.handleFile}),l.a.createElement("label",{htmlFor:"file"},this.state.filename?this.state.filename:l.a.createElement("div",null,l.a.createElement("strong",null,"Selecione um arquivo"),l.a.createElement("span",null," ou solte o aqui")))))}}]),t}(l.a.Component)),I=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleFile=a.handleFile.bind(Object(m.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(m.a)(a)),a.state={nome:"",protocolo:"",dataExame:"",possuiMarcapasso:!1,observacoes:"",exameFile:null},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleFile",value:function(e){var t=this;if(FileReader&&e){var a=new FileReader;a.onloadend=function(){t.setState({exameFile:e})},a&&a.readAsDataURL(e)}}},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(p.a)({},n,a))}},{key:"render",value:function(){var e;return l.a.createElement("form",{className:"ui form",onSubmit:this.submitHandle},l.a.createElement("div",{className:"field"},l.a.createElement(x,{fileChanged:this.handleFile})),l.a.createElement("div",{className:"fields"},l.a.createElement("div",{className:"inline fluid field"},l.a.createElement("label",null,"Protocolo:"),l.a.createElement("input",{type:"text",name:"protocolo",value:this.state.protocolo,onChange:this.handleInputChange})),l.a.createElement("div",{className:"inline field"},l.a.createElement("label",null,"Data Exame"),l.a.createElement("input",{name:"dataExame",type:"date",value:this.state.dataExame,onChange:this.handleInputChange}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",null,"Nome"),l.a.createElement("input",{className:"ui input",type:"text",name:"nome",value:this.state.nome,onChange:this.handleInputChange})),l.a.createElement("h3",{className:"ui dividing header"},"Informa\xe7\xf5es Opcionais"),l.a.createElement("div",{className:"field"},l.a.createElement("div",{className:"ui toggle checkbox"},l.a.createElement("input",{type:"checkbox",tabIndex:"0",value:this.state.possuiMarcapasso,onChange:this.handleInputChange}),l.a.createElement("label",null,"Possui Marca-passo?"))),l.a.createElement("div",{className:"field"},l.a.createElement("label",null,"Outras Observa\xe7\xf5es:"),l.a.createElement("textarea",(e={id:"info",name:"info",rows:"5"},Object(p.a)(e,"name","observacoes"),Object(p.a)(e,"value",this.state.observacoes),Object(p.a)(e,"onChange",this.handleInputChange),e))),l.a.createElement("div",{className:"field"},l.a.createElement("input",{type:"submit",className:"ui fluid green button",value:"Cadastrar"})))}}]),t}(l.a.Component),S=(a(284),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).buttonClickHandler=a.buttonClickHandler.bind(Object(m.a)(a)),a.modalCloseHandler=a.modalCloseHandler.bind(Object(m.a)(a)),a.modoExibicao=a.modoExibicao.bind(Object(m.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(m.a)(a)),a.filtrar=a.filtrar.bind(Object(m.a)(a)),a.state={isOpen:!1,exibicaoTabela:!0,filter:""},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"buttonClickHandler",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"modalCloseHandler",value:function(){this.setState({isOpen:!1})}},{key:"modoExibicao",value:function(e){this.setState({exibicaoTabela:e})}},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(p.a)({},n,a))}},{key:"filtrar",value:function(e){return e.protocolo.match(this.state.filter)||e.nome.match(this.state.filter)}},{key:"render",value:function(){var e,t=this;return this.props.loading?l.a.createElement("div",null,"Loading..."):this.props.error?l.a.createElement("div",null,"Erro..."):(this.resultList=this.props.data.listarExames,this.state.filter&&(this.resultList=this.resultList.filter(this.filtrar)),e=this.state.exibicaoTabela?l.a.createElement("div",{className:"ui doubling four stackable tiny cards"},this.resultList.map((function(e){return l.a.createElement("div",{key:e.id,className:"ui yellow card"},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"header"},e.protocolo," - ",e.nome),l.a.createElement("div",{className:"meta"},l.a.createElement("div",{className:"ui ribbon label"},e.dataExame?e.dataExame:(new Date).toISOString().substr(0,10)+" "+(new Date).toISOString().substr(11,5))),l.a.createElement("div",{className:"description bottom"},l.a.createElement("a",{href:"https://laudos.herokuapp.com/download?id="+e.id+"&download=exame"},"Baixar Laudo"))),l.a.createElement("div",{className:"extra content"},l.a.createElement("button",{className:"ui primary small button btn-default"},"Remover"),l.a.createElement("button",{className:"ui small button btn-default"},"Remover")))}))):l.a.createElement("div",{role:"list",className:"ui animated huge divided relaxed list"},this.resultList.map((function(e){return l.a.createElement("div",{key:e.id,role:"listitem",className:"item"},l.a.createElement("i",{"aria-hidden":"true",className:"chart bar icon large middle aligned"}),l.a.createElement("div",{className:"content"},l.a.createElement("a",{className:"header"},e.protocolo," - ",e.nome),l.a.createElement("a",{className:"description"},"Teste"),l.a.createElement("button",{className:"ui small button btn-default"},"Remover")))}))),l.a.createElement("div",null,l.a.createElement("div",{className:"ui menu"},l.a.createElement("a",{className:"item",onClick:this.buttonClickHandler},l.a.createElement("i",{"aria-hidden":"true",className:"add icon"}),"Novo Exame"),l.a.createElement("div",{className:"right menu"},l.a.createElement(k.a.Item,{active:!this.state.exibicaoTabela,onClick:function(){return t.modoExibicao(!1)}},l.a.createElement("i",{"aria-hidden":"true",className:"icon list"})),l.a.createElement(k.a.Item,{active:this.state.exibicaoTabela,onClick:function(){return t.modoExibicao(!0)}},l.a.createElement("i",{"aria-hidden":"true",className:"icon th"})),l.a.createElement("div",{className:"item"},l.a.createElement("div",{className:"ui icon input"},l.a.createElement("input",{type:"text",placeholder:"Filtro",name:"filter",value:this.state.filter,onChange:this.handleInputChange}),l.a.createElement("i",{"aria-hidden":"true",className:"search icon"}))))),l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",null,"Total de Registros: ",this.props.data.listarExames.length),l.a.createElement("div",{className:"tabelaContainer"},e)),l.a.createElement(j.a,{onClose:this.modalCloseHandler,open:this.state.isOpen},l.a.createElement(N.a,{icon:"upload",content:"Cadastrar novo exame"}),l.a.createElement(j.a.Content,null,l.a.createElement(I,null)))))}}]),t}(l.a.Component)),H=function(){return l.a.createElement(C,null,(function(e){var t=Object.assign({},e);return l.a.createElement(S,t)}))},w=a(468),F=a(461),L=a(469),D=a(464),T=a(471),R=a(463),P=a(63),q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=a.handleSubmit.bind(Object(m.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(m.a)(a)),a.state={error:!0,animation:"fade up",duration:800,userName:"",password:"",isLogged:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),fetch("https://laudos.herokuapp.com/login",{method:"post",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"userName=".concat(this.state.userName,"&password=").concat(this.state.password)}).then((function(e){return e.json()})).then((function(e){document.cookie="signedin=true",t.setState({isLogged:!0}),t.props.componentCallback(!0)}))}},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(p.a)({},n,a))}},{key:"render",value:function(){return this.state.isLogged?l.a.createElement(P.a,{to:"/"}):l.a.createElement(w.a,{textAlign:"center",verticalAlign:"middle",style:{height:"100vh"}},l.a.createElement(w.a.Column,{style:{maxWidth:450}},l.a.createElement(F.a,{error:this.state.error,size:"large",onSubmit:this.handleSubmit},l.a.createElement(L.a,{stacked:!0},l.a.createElement(F.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"E-mail address",name:"userName",value:this.state.userName,onChange:this.handleInputChange}),l.a.createElement(F.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleInputChange}),l.a.createElement(D.a,{color:"teal",fluid:!0,size:"large"},"Login"))),l.a.createElement(T.a.Group,{animation:this.state.animation,duration:this.state.duration},this.props.error&&this.props.error.graphQLErrors.map((function(e,t){var a=e.message;return l.a.createElement(R.a,{error:!0,header:"Action Forbidden",content:a})})))))}}]),t}(l.a.Component),A=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://laudos.herokuapp.com/logoff",{method:"post",credentials:"include"}).then((function(e){return e.json()})).then((function(t){document.cookie="signedin=false",e.props.componentCallback(!1)}))}},{key:"render",value:function(){return l.a.createElement(P.a,{to:"/login"})}}]),t}(l.a.Component),M=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state={isOpen:!1},e.buttonClickHandle=e.buttonClickHandle.bind(Object(m.a)(e)),e}return Object(d.a)(t,e),Object(o.a)(t,[{key:"buttonClickHandle",value:function(){console.log(this.state.isOpen),this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return l.a.createElement("div",null)}}]),t}(l.a.Component),U=a(258),z=a.n(U),B=(a(445),l.a.Component,a(446),a(82)),J=function(){return"true"===z.a.get("signedin")},G=function(e){var t=e.component,a=e.componentCallback,n=Object(h.a)(e,["component","componentCallback"]);return l.a.createElement(P.b,Object.assign({},n,{render:function(e){return J()?l.a.createElement(t,Object.assign({},e,{componentCallback:a})):l.a.createElement(P.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={isLoggedIn:J()},a.componentCallback=a.componentCallback.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentCallback",value:function(e){this.setState({isLoggedIn:e})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(B.a,null,this.state.isLoggedIn&&l.a.createElement("div",{className:"ui pointing secondary menu"},l.a.createElement(B.b,{className:"item",exact:!0,to:"/"},"Home"),l.a.createElement(B.b,{className:"item",to:"/logoff"},"Logoff")),l.a.createElement(P.d,null,l.a.createElement(P.b,{path:"/login"},l.a.createElement(q,{componentCallback:this.componentCallback})),l.a.createElement(G,{path:"/logoff",component:A,componentCallback:this.componentCallback}),l.a.createElement(G,{path:"/",component:H}))),l.a.createElement(M,null))}}]),t}(n.Component),W=a(259),K=a(64),V=a(261),X=a(21),Y=Object(W.createUploadLink)({uri:"https://laudos.herokuapp.com/graphql",credentials:"include"}),Z=new K.a({link:Y,cache:new V.a});r.a.render(l.a.createElement((function(){return l.a.createElement(X.a,{client:Z},l.a.createElement(Q,null))}),null),document.getElementById("root"))}},[[272,1,2]]]);
//# sourceMappingURL=main.1d04a139.chunk.js.map