(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{295:function(e,t,a){e.exports=a(532)},304:function(e,t){},306:function(e,t){},342:function(e,t){},343:function(e,t){},520:function(e,t,a){},532:function(e,t,a){"use strict";a.r(t);a(296);var n=a(0),o=a.n(n),r=a(73),c=a.n(r),l=a(37),i=a(38),s=a(39),u=a(40),h=a(30),d=a(41),p=a(42),m=a(548),b=a(551),f=a(545),g=a(550),w=a(547),E=a(546),k=a(66),v=a(259),C=a.n(v),j=Object({NODE_ENV:"production",PUBLIC_URL:""}).PUBLIC_KEY||"-----BEGIN PUBLIC KEY-----\nMFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBALns1DW2lVs/Cjk9nVxBzG8Gn0QIF8wH\n1LotLwuOk+lgVXZiXzkbMXxDzj3rEP0aVY0ATtqWxWcjurJXwqViLF0CAwEAAQ==\n-----END PUBLIC KEY-----",O={algorithm:"RS256",issuer:"laudos"};function y(){var e=localStorage.getItem("AuthToken");if(!e)return!1;try{return C.a.verify(e,j,O)}catch(t){return e&&localStorage.removeItem("AuthToken"),!1}}var S=a(74),I=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(h.a)(a)),a.state={error:!1,duration:800,userName:"",password:"",isLogged:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),fetch("".concat(S.appUrl,"/login"),{method:"post",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"userName=".concat(this.state.userName,"&password=").concat(this.state.password)}).then((function(e){if(200===e.status)return e.json();throw new Error(e.Message)}),(function(e){return t.setState({error:!0}),e})).then((function(e){t.setState({isLogged:!0}),localStorage.setItem("AuthToken",e.token),t.props.componentCallback(!0)})).catch((function(e){t.setState({error:!0})}))}},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(p.a)({},n,a))}},{key:"render",value:function(){return y()||this.state.isLogged?o.a.createElement(k.a,{to:"/"}):o.a.createElement(m.a,{textAlign:"center",verticalAlign:"middle",style:{height:"100vh"}},o.a.createElement(m.a.Column,{style:{maxWidth:450}},o.a.createElement(b.a.Group,{animation:"fade up",duration:800},o.a.createElement(f.a,{error:this.state.error,size:"large",onSubmit:this.handleSubmit},o.a.createElement(g.a,null,o.a.createElement(f.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"E-mail address",name:"userName",value:this.state.userName,onChange:this.handleInputChange}),o.a.createElement(f.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",required:!0,placeholder:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleInputChange}),o.a.createElement(w.a,{color:"teal",fluid:!0,size:"large"},"Login"),o.a.createElement(E.a,{error:!0,header:"Error ao realizar login",content:this.state.error}))))))}}]),t}(o.a.Component),A=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){localStorage.removeItem("AuthToken"),this.props.componentCallback(!1)}},{key:"render",value:function(){return o.a.createElement(k.a,{to:"/login"})}}]),t}(o.a.Component),P=a(278),N=function(e){var t=e.component,a=e.componentCallback,n=Object(P.a)(e,["component","componentCallback"]);return o.a.createElement(k.b,Object.assign({},n,{render:function(e){return y()?o.a.createElement(t,Object.assign({},e,{componentCallback:a})):o.a.createElement(k.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},x=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(h.a)(a)),a.state={error:!1,duration:800,oldPassword:"",newPassword:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){try{var e=y();this.setState({userName:e.userName})}catch(t){}}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),fetch("".concat(S.appUrl,"/changepassword"),{method:"post",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8",authorization:localStorage.getItem("AuthToken")},body:"oldPassword=".concat(this.state.oldPassword,"&newPassword=").concat(this.state.newPassword)}).then((function(e){if(200!==e.status)throw new Error(e.Message)})).catch((function(e){t.setState({error:!0})}))}},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(p.a)({},n,a))}},{key:"render",value:function(){return o.a.createElement(m.a,{textAlign:"center",verticalAlign:"middle",style:{height:"100vh"}},o.a.createElement(m.a.Column,{style:{maxWidth:450}},o.a.createElement(b.a.Group,{animation:"fade up",duration:800},o.a.createElement(f.a,{error:this.state.error,size:"large",onSubmit:this.handleSubmit},o.a.createElement(g.a,null,o.a.createElement(f.a.Input,{fluid:!0,icon:"user",iconPosition:"left",readOnly:!0,type:"text",name:"user",value:this.state.userName,onChange:this.handleInputChange}),o.a.createElement(f.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",required:!0,placeholder:"Senha atual",type:"password",name:"oldPassword",value:this.state.oldPassword,onChange:this.handleInputChange}),o.a.createElement(f.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",required:!0,placeholder:"Nova senha",type:"password",name:"newPassword",value:this.state.newPassword,onChange:this.handleInputChange}),o.a.createElement(w.a,{color:"teal",fluid:!0,size:"large"},"Alterar Senha"),o.a.createElement(E.a,{error:!0,header:"Error ao realizar login",content:this.state.error}))))))}}]),t}(o.a.Component),L=(a(520),a(96)),U=a(281),D=a(283),z=a(285),T=a(279),B=a(65),q=a(10),M=a(544),J=function(){return Object(B.split)((function(e){var t=e.query,a=Object(q.j)(t),n=a.kind,o=a.operation;return"OperationDefinition"===n&&"subscription"===o}),new T.SubscriptionClient("".concat(S.wsUrl,"/subscriptions"),{reconnect:!0,connectionParams:{authToken:localStorage.getItem("AuthToken")||""}}),Object(U.createUploadLink)({uri:"".concat(S.appUrl,"/graphql"),credentials:"include",headers:{authorization:localStorage.getItem("AuthToken")||""}}))},V=function(e){var t=e.children;return o.a.createElement(M.a,{client:new D.a({link:J(),cache:new z.a})},t)},F=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={isAuthenticated:!1},a.componentCallback=a.componentCallback.bind(Object(h.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentCallback",value:function(e){this.setState({isAuthenticated:y()})}},{key:"componentDidMount",value:function(){this.setState({isAuthenticated:y()})}},{key:"render",value:function(){return o.a.createElement(L.a,null,o.a.createElement(V,null,o.a.createElement(k.d,null,o.a.createElement(k.b,{path:"/login"},o.a.createElement(I,{componentCallback:this.componentCallback})),o.a.createElement(N,{path:"/logoff",component:A,componentCallback:this.componentCallback}),o.a.createElement(N,{path:"/passwordchange",component:x}),o.a.createElement(N,{path:"/"},o.a.createElement("div",null,"Nero")))))}}]),t}(o.a.Component);c.a.render(o.a.createElement(F,null),document.getElementById("root"))},74:function(e){e.exports=JSON.parse('{"appUrl":"https://laudos.herokuapp.com/graphql","wsUrl":"wss://laudos.herokuapp.com"}')}},[[295,1,2]]]);
//# sourceMappingURL=main.d59f5bec.chunk.js.map